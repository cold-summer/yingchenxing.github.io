<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>安卓开发（三）UI组件—布局</title>
    <url>/2021/09/03/AndroidDevelopment01/</url>
    <content><![CDATA[<h1 id="布局管理器"><a href="#布局管理器" class="headerlink" title="布局管理器"></a>布局管理器</h1><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><ol>
<li><p>线性布局</p>
</li>
<li><p>相对布局</p>
</li>
</ol>
<h2 id="线性布局（LinearLayout）"><a href="#线性布局（LinearLayout）" class="headerlink" title="线性布局（LinearLayout）"></a>线性布局（LinearLayout）</h2><h3 id="常用属性"><a href="#常用属性" class="headerlink" title="常用属性"></a>常用属性</h3><p><img src="/2021/09/03/AndroidDevelopment01/1630639147085.png"></p>
<p>layout_height、width：控制长、宽</p>
<p>layout_padding：控制边距</p>
<p>layout_orientation：排列方式（纵向、横向）</p>
<p>layout_margin：组件外边距</p>
<p>background：背景颜色</p>
<p>gravity：调整位置</p>
<p>layout_weight：权重</p>
<h2 id="相对布局（RelativeLayout）"><a href="#相对布局（RelativeLayout）" class="headerlink" title="相对布局（RelativeLayout）"></a>相对布局（RelativeLayout）</h2><h3 id="常用属性-1"><a href="#常用属性-1" class="headerlink" title="常用属性"></a>常用属性</h3><p><img src="/2021/09/03/AndroidDevelopment01/1630672158326.png"></p>
<p>layout_toRightOf：放在……右边</p>
<p>layout_align: 边缘对齐</p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title>安卓开发（一）通过XML和Java控制UI界面</title>
    <url>/2021/09/02/AndroidDevelopment03/</url>
    <content><![CDATA[<h1 id="使用XML布局文件控制UI界面"><a href="#使用XML布局文件控制UI界面" class="headerlink" title="使用XML布局文件控制UI界面"></a>使用XML布局文件控制UI界面</h1><ol>
<li>在Android应用的res/layout目录下编写XML文件</li>
</ol>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/btn_1<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>按钮1<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#0066FF<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>backgroundTint</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#FFFFFF<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol start="2">
<li>在Activity中使用以下Java代码显示XML文件中布局的内容</li>
</ol>
<pre class="line-numbers language-xml"><code class="language-xml">setContentView(R.layout.activity_main);
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><strong>该代码在创建时会自动生成</strong></p>
<h1 id="在Java代码中控制UI界面"><a href="#在Java代码中控制UI界面" class="headerlink" title="在Java代码中控制UI界面"></a>在Java代码中控制UI界面</h1><pre class="line-numbers language-java"><code class="language-java">FrameLayout frameLayout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FrameLayout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
frameLayout<span class="token punctuation">.</span><span class="token function">setBackgroundResource</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>chen<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setContentView</span><span class="token punctuation">(</span>frameLayout<span class="token punctuation">)</span><span class="token punctuation">;</span>
TextView tv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextView</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tv<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"begin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tv<span class="token punctuation">.</span><span class="token function">setTextSize</span><span class="token punctuation">(</span>TypedValue<span class="token punctuation">.</span>COMPLEX_UNIT_SP<span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="使用XML和Java代码混合控制UI界面"><a href="#使用XML和Java代码混合控制UI界面" class="headerlink" title="使用XML和Java代码混合控制UI界面"></a>使用XML和Java代码混合控制UI界面</h1><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> Button mBtnTextView<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mBtnTextView <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_textview<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mBtnTextView<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span>View view<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//跳转到TextView演示界面</span>
                Intent intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span>MainActivity<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span>TestViewActivity<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>

    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/btn_textview<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>TextView<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title>安卓开发（四）UI组件—视图</title>
    <url>/2021/09/07/AndroidDevelopment04/</url>
    <content><![CDATA[<h1 id="ListView"><a href="#ListView" class="headerlink" title="ListView"></a>ListView</h1><h2 id="常用属性"><a href="#常用属性" class="headerlink" title="常用属性"></a>常用属性</h2><pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ListView</span>
    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/list_view<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"Apple"</span><span class="token punctuation">,</span><span class="token string">"Banana"</span><span class="token punctuation">,</span><span class="token string">"Orange"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ArrayAdapter<span class="token operator">&lt;</span>String<span class="token operator">></span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayAdapter</span><span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">(</span>
                MainActivity<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> android<span class="token punctuation">.</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>simple_list_item_1<span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ListView listView <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>list_view<span class="token punctuation">)</span><span class="token punctuation">;</span>
        listView<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>数组中的数据无法直接传递到ListView，需要借助适配器完成。</p>
<p>Android提供了很多适配器的实践类（如：ArrayAdapter）</p>
<pre class="line-numbers language-java"><code class="language-java">ArrayAdapter adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayAdapter</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>当前上下文<span class="token punctuation">,</span> ListView子项布局id<span class="token punctuation">,</span> 适配的数据<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="显示效果"><a href="#显示效果" class="headerlink" title="显示效果"></a>显示效果</h2><p><img src="/2021/09/07/AndroidDevelopment04/1631017249023.png"></p>
<h2 id="自定义适配器"><a href="#自定义适配器" class="headerlink" title="自定义适配器"></a>自定义适配器</h2><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FruitAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">ArrayAdapter</span><span class="token operator">&lt;</span>Fruit<span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> resourceId<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">FruitAdapter</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> <span class="token keyword">int</span> textViewResourceId<span class="token punctuation">,</span>
                        List<span class="token operator">&lt;</span>Fruit<span class="token operator">></span> objects<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> textViewResourceId<span class="token punctuation">,</span> objects<span class="token punctuation">)</span><span class="token punctuation">;</span>
        resourceId <span class="token operator">=</span> textViewResourceId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> View <span class="token function">getView</span><span class="token punctuation">(</span><span class="token keyword">int</span> position<span class="token punctuation">,</span> View convertview<span class="token punctuation">,</span> ViewGroup parent<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//position指在容器中的位置</span>
        Fruit fruit <span class="token operator">=</span> <span class="token function">getItem</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//获取当前Fruit实例</span>
        View view <span class="token operator">=</span> LayoutInflater<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>resourceId<span class="token punctuation">,</span>parent<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ImageView fruitImage <span class="token operator">=</span>view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>fruit_image<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//实例化Imageview</span>
        TextView fruitName <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>fruit_name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//实例化TextView</span>
        fruitImage<span class="token punctuation">.</span><span class="token function">setImageResource</span><span class="token punctuation">(</span>fruit<span class="token punctuation">.</span><span class="token function">getImageId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//将图片传入</span>
        fruitName<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>fruit<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//将文字传入</span>
        <span class="token keyword">return</span> view<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在getview（）方法中每次都将布局重新加载了一遍，将加载好的布局缓存到convertView参数可节约时间</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">if</span> <span class="token punctuation">(</span>convertview <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    view <span class="token operator">=</span> LayoutInflater<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>resourceId<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    view <span class="token operator">=</span> convertview<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="ListView的点击事件"><a href="#ListView的点击事件" class="headerlink" title="ListView的点击事件"></a>ListView的点击事件</h2><pre class="line-numbers language-java"><code class="language-java">listView<span class="token punctuation">.</span><span class="token function">setOnItemClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AdapterView<span class="token punctuation">.</span>OnItemClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onItemClick</span><span class="token punctuation">(</span>AdapterView<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> adapterView<span class="token punctuation">,</span> View view<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">long</span> l<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Fruit fruit <span class="token operator">=</span> fruitList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//i指位置，l指id</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>MainActivity<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span>fruit<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="LayoutInflater类"><a href="#LayoutInflater类" class="headerlink" title="LayoutInflater类"></a>LayoutInflater类</h1><p>转载：<a href="https://www.cnblogs.com/shitianzeng/articles/2323427.html">淡泊名利</a></p>
<p>作用类似于findViewById()。不同点是LayoutInflater是用来找res/layout/下的xml布局文件，并且实例化；而findViewById()是找xml布局文件下的具体widget控件(如Button、TextView等)。</p>
<p>具体作用： </p>
<p>1、对于一个没有被载入或者想要动态载入的界面，都需要使用LayoutInflater.inflate()来载入；</p>
<p>2、对于一个已经载入的界面，就可以使用Activiyt.findViewById()方法来获得其中的界面元素。</p>
<h1 id="RecyclerView"><a href="#RecyclerView" class="headerlink" title="RecyclerView"></a>RecyclerView</h1><h2 id="引用包"><a href="#引用包" class="headerlink" title="引用包"></a>引用包</h2><p>在app文件夹下的build.gradle文件中加入</p>
<pre><code>implementation &quot;com.android.support:appcompat-v7:28.0.0&quot;
implementation &quot;com.android.support:recyclerview-v7:$recyclerviewV7Version&quot;
</code></pre>
<h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FruitAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>Adapter</span><span class="token operator">&lt;</span>FruitAdapter<span class="token punctuation">.</span>ViewHolder<span class="token operator">></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> List<span class="token operator">&lt;</span>Fruit<span class="token operator">></span> mFruitList<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ViewHolder</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>ViewHolder</span> <span class="token punctuation">{</span>
        ImageView fruitImage<span class="token punctuation">;</span>
        TextView fruitName<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token function">ViewHolder</span><span class="token punctuation">(</span>View view<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span><span class="token punctuation">;</span>
            fruitImage <span class="token operator">=</span> <span class="token punctuation">(</span>ImageView<span class="token punctuation">)</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>fruit_image<span class="token punctuation">)</span><span class="token punctuation">;</span>
            fruitName <span class="token operator">=</span> <span class="token punctuation">(</span>TextView<span class="token punctuation">)</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>fruit_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">FruitAdapter</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span>Fruit<span class="token operator">></span> fruitList<span class="token punctuation">)</span><span class="token punctuation">{</span>
        mFruitList <span class="token operator">=</span> fruitList<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@NonNull</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> FruitAdapter<span class="token punctuation">.</span>ViewHolder <span class="token function">onCreateViewHolder</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> ViewGroup parent<span class="token punctuation">,</span> <span class="token keyword">int</span> viewType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        View view <span class="token operator">=</span> LayoutInflater<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>fruit_item<span class="token punctuation">,</span>parent<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ViewHolder holder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ViewHolder</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> holder<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onBindViewHolder</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> FruitAdapter<span class="token punctuation">.</span>ViewHolder holder<span class="token punctuation">,</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Fruit fruit <span class="token operator">=</span> mFruitList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
        holder<span class="token punctuation">.</span>fruitImage<span class="token punctuation">.</span><span class="token function">setImageResource</span><span class="token punctuation">(</span>fruit<span class="token punctuation">.</span><span class="token function">getImageId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        holder<span class="token punctuation">.</span>fruitName<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>fruit<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getItemCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mFruitList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>首先定义了ViewHolder，继承自RecyclerView.ViewHolder。传入参数view，通常是RecyclerView子项的最外层布局。</p>
<p>onCreateViewHolder()：用于创建ViewHolder实例，把加载的布局传入并将viewholder返回</p>
<p>onBindViewHolder()：对RecyclerView子项进行赋值</p>
<p>getItemCount()：返回RecyclerView有多少长度</p>
<p>使用recyclerView</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initFruits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    RecyclerView recyclerView <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>recycle_view<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//1. 实例化对象</span>
    LinearLayoutManager layoutManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinearLayoutManager</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//2. 新建LinearLayoutManager类</span>
    recyclerView<span class="token punctuation">.</span><span class="token function">setLayoutManager</span><span class="token punctuation">(</span>layoutManager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//3. 为recyclerView设置LayoutManager</span>
    FruitAdapter adapter<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FruitAdapter</span><span class="token punctuation">(</span>fruitList<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//</span>
    recyclerView<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//4. 设置适配器</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LinearLayoutManager：用于指定RecyclerView的布局方式</p>
<p>recyclerView.setAdapter()：完成适配器设置</p>
<h2 id="实现横向滚动和瀑布流布局"><a href="#实现横向滚动和瀑布流布局" class="headerlink" title="实现横向滚动和瀑布流布局"></a>实现横向滚动和瀑布流布局</h2><h3 id="横向布局"><a href="#横向布局" class="headerlink" title="横向布局"></a>横向布局</h3><p>修改布局文件：</p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/fruit_image<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>center_horizontal<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/fruit_name<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>center_horizontal<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在main中指定布局方式：</p>
<pre class="line-numbers language-java"><code class="language-java">layoutManager<span class="token punctuation">.</span><span class="token function">setOrientation</span><span class="token punctuation">(</span>LinearLayoutManager<span class="token punctuation">.</span>HORIZONTAL<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="瀑布流布局"><a href="#瀑布流布局" class="headerlink" title="瀑布流布局"></a>瀑布流布局</h3><p>在main中指定布局方式：</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token function">taggeredGridLayoutManager</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>StaggeredGridLayoutManager<span class="token punctuation">.</span>VERTICAL<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>3表示分成3列，StaggeredGridLayoutManager.VERTICAL表示布局正向排列</p>
<h2 id="RecyclerView的点击事件"><a href="#RecyclerView的点击事件" class="headerlink" title="RecyclerView的点击事件"></a>RecyclerView的点击事件</h2><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> FruitAdapter<span class="token punctuation">.</span>ViewHolder <span class="token function">onCreateViewHolder</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> ViewGroup parent<span class="token punctuation">,</span> <span class="token keyword">int</span> viewType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    View view <span class="token operator">=</span> LayoutInflater<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>fruit_item<span class="token punctuation">,</span>parent<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> ViewHolder holder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ViewHolder</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span><span class="token punctuation">;</span>
    holder<span class="token punctuation">.</span>fruitView<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span>View view<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> position <span class="token operator">=</span> holder<span class="token punctuation">.</span><span class="token function">getAdapterPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Fruit fruit <span class="token operator">=</span> mFruitList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
            Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"you click view"</span><span class="token operator">+</span>fruit<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    holder<span class="token punctuation">.</span>fruitImage<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span>View view<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> position <span class="token operator">=</span> holder<span class="token punctuation">.</span><span class="token function">getAdapterPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Fruit fruit <span class="token operator">=</span> mFruitList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
            Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"you click image"</span><span class="token operator">+</span>fruit<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title>安卓开发（零）AndroidStdio项目中各个文件(夹)的作用</title>
    <url>/2021/09/07/AndroidDevelopment05/</url>
    <content><![CDATA[<p>笔记来自于《第一行代码》</p>
<img src="/2021/09/07/AndroidDevelopment05/1631014300281.png" style="zoom:150%;">

<p><img src="/2021/09/07/AndroidDevelopment05/1631014415289.png"></p>
<p><strong>1. src</strong></p>
<p>存放所有Java代码的地方。</p>
<p><strong>2. gen</strong></p>
<p>此文件夹中的内容自动生成，其中R.JAVA文件，在项目中添加的任何资源都会生成一个相应的资源id。</p>
<p><strong>3. assets</strong></p>
<p>主要存放一些随程序打包的文件。当程序中使用到WebView加载本地网页时，所有网页相关的文件也都存放到这个文件夹下</p>
<p><strong>4. bin</strong></p>
<p>包含一些在编译时自动产生的文件。其中会有一个当前项目编译好的安装包，将该文件拷到手机上就可以直接安装了。</p>
<p><strong>5. libs</strong></p>
<p>如果项目中用到了第三方Jar包，就需要吧这些包放到libs目录下</p>
<p><strong>6. res</strong></p>
<p>使用的所有图片、布局、字符串都是放在这个文件夹下，且该文件夹有很多细分的子文件夹。</p>
<p><strong>7. AndroidManiFest.xml</strong></p>
<p>整个安卓项目的配置文件，在程序中配置的四大组件都需要在这个文件夹注册。另外，还可以在这个文件夹中给应用程序添加权限声明，也可以重新指定创建项目时指定的程序最低兼容版本和目标版本。</p>
<p><strong>8. project.properties</strong></p>
<p>通过一行代码指定了编译程序时所使用的sdk</p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>安卓开发（五）碎片</title>
    <url>/2021/09/09/AndroidDevelopment07/</url>
    <content><![CDATA[<h2 id="碎片的使用方式"><a href="#碎片的使用方式" class="headerlink" title="碎片的使用方式"></a>碎片的使用方式</h2><h3 id="碎片的简单用法："><a href="#碎片的简单用法：" class="headerlink" title="碎片的简单用法："></a>碎片的简单用法：</h3><p><strong>left_fragment布局</strong></p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/button<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>center_horizontal<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>LeftFragment类</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LeftFragment</span> <span class="token keyword">extends</span> <span class="token class-name">Fragment</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Nullable</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> View <span class="token function">onCreateView</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> LayoutInflater inflater<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> ViewGroup container<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        View view <span class="token operator">=</span> inflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>left_fragment<span class="token punctuation">,</span>container<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> view<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>通过inflate动态载入left_fragment布局</p>
<p><strong>activity_main布局</strong></p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fragment</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/left_fragment<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.example.fragment.LeftFragment<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fragment</span>
        <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.example.fragment.RightFragment<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用 android:name属性显式指明添加的碎片类名</p>
<h2 id="动态添加碎片"><a href="#动态添加碎片" class="headerlink" title="动态添加碎片"></a>动态添加碎片</h2><p>MainActivity改为</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token keyword">implements</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Button button <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span>
        button<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">replaceFragment</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RightFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span>View view<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>view<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">case</span> R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>button<span class="token operator">:</span>
                <span class="token function">replaceFragment</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AnotherRightFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">replaceFragment</span><span class="token punctuation">(</span>Fragment fragment<span class="token punctuation">)</span><span class="token punctuation">{</span>
        FragmentManager fragmentManager <span class="token operator">=</span> <span class="token function">getSupportFragmentManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        FragmentTransaction transaction <span class="token operator">=</span> fragmentManager<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        transaction<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>right_layout<span class="token punctuation">,</span>fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        transaction<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>动态添加碎片：</strong></p>
<ol>
<li>创建添加的碎片实例</li>
<li>获取FramentManager，在活动中可以直接通过调用getSupportFramentManager()方法得到</li>
<li>开启一个事务，通过调用beginTransaction（）方法开启</li>
<li>向容器内添加或替换碎片，一般使用replace（）方法实现，需要传入容器的id和带添加得碎片实例</li>
<li>提交事务，调用commit（）方法完成</li>
</ol>
<h2 id="在碎片中模拟返回栈"><a href="#在碎片中模拟返回栈" class="headerlink" title="在碎片中模拟返回栈"></a>在碎片中模拟返回栈</h2><p>main中相关内容修改为：</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">replaceFragment</span><span class="token punctuation">(</span>Fragment fragment<span class="token punctuation">)</span><span class="token punctuation">{</span>
    FragmentManager fragmentManager <span class="token operator">=</span> <span class="token function">getSupportFragmentManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    FragmentTransaction transaction <span class="token operator">=</span> fragmentManager<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    transaction<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>right_layout<span class="token punctuation">,</span>fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    transaction<span class="token punctuation">.</span><span class="token function">addToBackStack</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//添加到返回栈</span>
    transaction<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>调用了FragmentTransaction的addToBackStack()方法，它可以接受一个名字用于描述返回栈状态，一般传入null即可。此时按下Back可以回到上一个界面。</p>
<h2 id="动态加载布局"><a href="#动态加载布局" class="headerlink" title="动态加载布局"></a>动态加载布局</h2><p>实现平板和手机之间布局的自动切换</p>
<p><strong>使用限定符</strong></p>
<p>在res目录下新建layout-large文件夹，新建布局activity-main.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:orientation=&quot;horizontal&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;&gt;

    &lt;fragment
        android:id=&quot;@+id/left_fragment&quot;
        android:name=&quot;com.example.fragment.LeftFragment&quot;

        android:layout_width=&quot;0dp&quot;
        android:layout_height=&quot;match_parent&quot;
        android:layout_weight=&quot;1&quot;/&gt;

&lt;/LinearLayout&gt;
</code></pre>
<img src="/2021/09/09/AndroidDevelopment07/1631261085370.png" style="zoom:50%;">

<img src="/2021/09/09/AndroidDevelopment07/1631261118447.png" style="zoom:33%;">

<p><strong>常见的限定词</strong></p>
<p><img src="/2021/09/09/AndroidDevelopment07/1631261226703.png"></p>
<p><img src="/2021/09/09/AndroidDevelopment07/1631261237479.png"></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Fragment</tag>
      </tags>
  </entry>
  <entry>
    <title>安卓开发（四）编写界面实践</title>
    <url>/2021/09/08/AndroidDevelopment06/</url>
    <content><![CDATA[<h2 id="制作Nine-Patch图片"><a href="#制作Nine-Patch图片" class="headerlink" title="制作Nine-Patch图片"></a>制作Nine-Patch图片</h2><p><strong>第一步</strong></p>
<p>右键图片文件，选择</p>
<p><img src="/2021/09/08/AndroidDevelopment06/1631177537152.png"></p>
<p><strong>第二步</strong></p>
<p><img src="/2021/09/08/AndroidDevelopment06/1631177615012.png"></p>
<p>上边框和左边框划分的区域是图片拉伸的区域</p>
<p>下边框和右边框换份的区域是内容填写的区域</p>
<p><strong>拉伸效果</strong></p>
<img src="/2021/09/08/AndroidDevelopment06/1631177880883.png" style="zoom:50%;">



<h2 id="编写主界面"><a href="#编写主界面" class="headerlink" title="编写主界面"></a>编写主界面</h2><h3 id="主界面"><a href="#主界面" class="headerlink" title="主界面"></a>主界面</h3><pre class="line-numbers language-java"><code class="language-java"><span class="token operator">&lt;</span>LinearLayout xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string">"http://schemas.android.com/apk/res/android"</span>
    android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>
    android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
    android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"#d8e0e8"</span>
    android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string">"vertical"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>androidx<span class="token punctuation">.</span>recyclerview<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>RecyclerView
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"0dp"</span>
        android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>LinearLayout
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"wrap_content"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>EditText
            android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/input_text"</span>
            android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
            android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"wrap_content"</span>
            android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
            android<span class="token operator">:</span>hint<span class="token operator">=</span><span class="token string">"Type something here"</span>
            android<span class="token operator">:</span>maxLines<span class="token operator">=</span><span class="token string">"2"</span><span class="token operator">/</span><span class="token operator">></span>

        <span class="token operator">&lt;</span>Button
            android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/send"</span>
            android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"wrap_content"</span>
            android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"wrap_content"</span>
            android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"Send"</span><span class="token operator">/</span><span class="token operator">></span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>LinearLayout<span class="token operator">></span>
    
<span class="token operator">&lt;</span><span class="token operator">/</span>LinearLayout<span class="token operator">></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Msg类"><a href="#Msg类" class="headerlink" title="Msg类"></a>Msg类</h3><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Msg</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> TYPE_RECEIVED <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span>  <span class="token keyword">static</span>  <span class="token keyword">final</span> <span class="token keyword">int</span> TYPE_SENT <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> String content<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> type<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token function">Msg</span><span class="token punctuation">(</span>String content<span class="token punctuation">,</span> <span class="token keyword">int</span> type<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> String <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> type<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="MainActivity"><a href="#MainActivity" class="headerlink" title="MainActivity"></a>MainActivity</h3><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> List<span class="token operator">&lt;</span>Msg<span class="token operator">></span> msgList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> EditText inputText<span class="token punctuation">;</span>
    <span class="token keyword">private</span> Button send<span class="token punctuation">;</span>
    <span class="token keyword">private</span> RecyclerView msgRecyclerView<span class="token punctuation">;</span>
    <span class="token keyword">private</span> MsgAdapter adapter<span class="token punctuation">;</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initMsgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        inputText <span class="token operator">=</span> <span class="token punctuation">(</span>EditText<span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>input_text<span class="token punctuation">)</span><span class="token punctuation">;</span>
        send <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>send<span class="token punctuation">)</span><span class="token punctuation">;</span>
        msgRecyclerView <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>msg_recycler_view<span class="token punctuation">)</span><span class="token punctuation">;</span>
        LinearLayoutManager layoutManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinearLayoutManager</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        msgRecyclerView<span class="token punctuation">.</span><span class="token function">setLayoutManager</span><span class="token punctuation">(</span>layoutManager<span class="token punctuation">)</span><span class="token punctuation">;</span>
        adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgAdapter</span><span class="token punctuation">(</span>msgList<span class="token punctuation">)</span><span class="token punctuation">;</span>
        msgRecyclerView<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        send<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span>View view<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                String content <span class="token operator">=</span> inputText<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    Msg msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Msg</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span>Msg<span class="token punctuation">.</span>TYPE_SENT<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    msgList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    adapter<span class="token punctuation">.</span><span class="token function">notifyItemInserted</span><span class="token punctuation">(</span>msgList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//将新消息插入</span>
                    msgRecyclerView<span class="token punctuation">.</span><span class="token function">scrollToPosition</span><span class="token punctuation">(</span>msgList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//将ListView定位到最后一行</span>
                    inputText<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//清空输入框</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">initMsgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        Msg msg1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Msg</span><span class="token punctuation">(</span><span class="token string">"Hello gal."</span><span class="token punctuation">,</span>Msg<span class="token punctuation">.</span>TYPE_RECEIVED<span class="token punctuation">)</span><span class="token punctuation">;</span>
        msgList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>msg1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Msg msg2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Msg</span><span class="token punctuation">(</span><span class="token string">"Hello. Who is that?"</span><span class="token punctuation">,</span>Msg<span class="token punctuation">.</span>TYPE_SENT<span class="token punctuation">)</span><span class="token punctuation">;</span>
        msgList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>msg2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Msg msg3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Msg</span><span class="token punctuation">(</span><span class="token string">"This is Tom."</span><span class="token punctuation">,</span>Msg<span class="token punctuation">.</span>TYPE_RECEIVED<span class="token punctuation">)</span><span class="token punctuation">;</span>
        msgList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>msg3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意新消息插入的步骤</p>
<pre class="line-numbers language-java"><code class="language-java">msgList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
adapter<span class="token punctuation">.</span><span class="token function">notifyItemInserted</span><span class="token punctuation">(</span>msgList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//将新消息插入</span>
msgRecyclerView<span class="token punctuation">.</span><span class="token function">scrollToPosition</span><span class="token punctuation">(</span>msgList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//将ListView定位到最后一行</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>安卓开发（六）广播</title>
    <url>/2021/09/13/AndroidDevelopment09/</url>
    <content><![CDATA[<h2 id="广播机制简介"><a href="#广播机制简介" class="headerlink" title="广播机制简介"></a>广播机制简介</h2><h4 id="标准广播（Normal-broadcasts）"><a href="#标准广播（Normal-broadcasts）" class="headerlink" title="标准广播（Normal broadcasts）"></a>标准广播（Normal broadcasts）</h4><p>完全异步执行的广播，广播发出后所有的广播接收器几乎在统一时刻收到这条广播信息，<strong>无法被截断</strong>。</p>
<p><img src="/2021/09/13/AndroidDevelopment09/image-20210914171353061.png"></p>
<h4 id="有序广播（Ordered-broadcasts"><a href="#有序广播（Ordered-broadcasts" class="headerlink" title="有序广播（Ordered broadcasts)"></a>有序广播（Ordered broadcasts)</h4><p>同步执行的广播，广播发出后，同一时刻只会有一个广播接收器能收到这条广播消息，当广播接收器中的逻辑执行完毕后，广播才会继续传递。</p>
<p><img src="/2021/09/13/AndroidDevelopment09/1631611053996.png"></p>
<h2 id="接收系统广播"><a href="#接收系统广播" class="headerlink" title="接收系统广播"></a>接收系统广播</h2><p>Android内置很多系统级别的广播，我们可以在应用程序中监听这些广播。这就需要广播接收器，下面将介绍其用法：</p>
<p>广播接受器可以对自己感兴趣的广播进行注册，这样当有相应广播发出时，接收器就能够收到。</p>
<p>注册广播的方式一般有两种，在代码中注册和在AndroidManifest.xml中注册，前者被称为动态注册，后者被称为静态注册</p>
<h3 id="动态注册监听网络变化"><a href="#动态注册监听网络变化" class="headerlink" title="动态注册监听网络变化"></a>动态注册监听网络变化</h3><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> IntentFilter intentFiler<span class="token punctuation">;</span>

    <span class="token keyword">private</span> NetworkChangeReceiver networkchangeReceiver<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>
        intentFiler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntentFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        intentFiler<span class="token punctuation">.</span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token string">"android.net.conn.CONNECTIVITY_CHANGE"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        networkchangeReceiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NetworkChangeReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">registerReceiver</span><span class="token punctuation">(</span>networkchangeReceiver<span class="token punctuation">,</span>intentFiler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">unregisterReceiver</span><span class="token punctuation">(</span>networkchangeReceiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">NetworkChangeReceiver</span> <span class="token keyword">extends</span> <span class="token class-name">BroadcastReceiver</span><span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceive</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> Intent intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span><span class="token string">"network changes"</span><span class="token punctuation">,</span>Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li><p>定义类NetworkChangeReceiver继承自BroadcastReceiver，重写onReceive（）方法得到信息</p>
</li>
<li><p>在onCreat（）方法中创建IntentFiler的实例。添加监听的广播</p>
</li>
<li><p>创建NetworkChangeReceiver的实例</p>
</li>
<li><p>调用registerReceiver（）方法注册，将NetworkChangeReceive和InterFilter的实例传进去。</p>
</li>
<li><p>此时，NetworkChangeReceive就可以收到指定值的广播。</p>
</li>
<li><p>重写onDestroy（）方法，加入</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token function">unregisterReceiver</span><span class="token punctuation">(</span>networkchangeReceiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>取消注册</p>
</li>
</ol>
<p><strong>优化代码</strong></p>
<p>重写NetworkChangeReceiver类</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">NetworkChangeReceiver</span> <span class="token keyword">extends</span> <span class="token class-name">BroadcastReceiver</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceive</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> Intent intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ConnectivityManager connectivityManager <span class="token operator">=</span> <span class="token punctuation">(</span>ConnectivityManager<span class="token punctuation">)</span>
                <span class="token function">getSystemService</span><span class="token punctuation">(</span>Context<span class="token punctuation">.</span>CONNECTIVITY_SERVICE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        NetworkInfo networkInfo <span class="token operator">=</span> connectivityManager<span class="token punctuation">.</span><span class="token function">getActiveNetworkInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>networkInfo <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> networkInfo<span class="token punctuation">.</span><span class="token function">isAvailable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span><span class="token string">"network is available"</span><span class="token punctuation">,</span>Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span><span class="token string">"network is not available"</span><span class="token punctuation">,</span>Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li>通过getSystemService（）方法得到了ConnectivityManager的实例，这是一个系统服务类，专门用于管理网络连接。</li>
<li>调用ConnectivityManager的getActiveNetworkInfo（）方法得到NetworkInfo实例</li>
<li>接着调用NetworkInfo的isAvailable（）方法，判断是否有网络</li>
</ol>
<p>在AndroidManifest,xml文件中加入权限：</p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.permission.ACCESS_NETWORK_STATE<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="静态注册实现开机启动"><a href="#静态注册实现开机启动" class="headerlink" title="静态注册实现开机启动"></a>静态注册实现开机启动</h3><p><strong>创建广播接收器</strong></p>
<p><img src="/2021/09/13/AndroidDevelopment09/image-20210914235953016.png"></p>
<p>Exported：是否允许广播接收器接受程序以外信息</p>
<p>Enabled：是否启用这个广播接收器</p>
<p><strong>修改BootCompleteReceiver中的代码</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BootCompleteReceiver</span> <span class="token keyword">extends</span> <span class="token class-name">BroadcastReceiver</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceive</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> Intent intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// TODO: This method is called when the BroadcastReceiver is receiving</span>
        <span class="token comment" spellcheck="true">// an Intent broadcast.</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span><span class="token string">"Boot Complete"</span><span class="token punctuation">,</span>Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>添加权限</p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.permission.RECEIVE_BOOT_COMPLETED<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>修改AndroidManifest.xml</p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>receiver</span>
    <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.BootCompleteReceiver<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>enabled</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>exported</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.intent.action.BOOT_COMPLETED<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>receiver</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="发送自定义广播"><a href="#发送自定义广播" class="headerlink" title="发送自定义广播"></a>发送自定义广播</h2><ol>
<li><p>新建广播接收器</p>
</li>
<li><p>在AndroidManifest.xml中</p>
</li>
</ol>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>receiver</span>
    <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.MyBroadcastReceiver<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>enabled</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>exported</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.example.broadcasttest.MY_BROADCAST<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>receiver</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>自定义广播名</p>
<ol start="3">
<li>发出对应的广播”com.example.broadcasttest.MY_BROADCAST”时接收器可以收到该广播</li>
</ol>
<h4 id="对于无法接收静态广播的情况（Android-8-0后）："><a href="#对于无法接收静态广播的情况（Android-8-0后）：" class="headerlink" title="对于无法接收静态广播的情况（Android 8.0后）："></a>对于无法接收静态广播的情况（Android 8.0后）：</h4><p>加入</p>
<pre class="line-numbers language-java"><code class="language-java">intent<span class="token punctuation">.</span><span class="token function">setComponent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ComponentName</span><span class="token punctuation">(</span><span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"包名"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="发送有序广播"><a href="#发送有序广播" class="headerlink" title="发送有序广播"></a>发送有序广播</h2><ol>
<li>将sendBroadcast()方法改为sendOrderBroadcast()方法，接收intent和null</li>
<li>设置优先级</li>
</ol>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>receiver</span>
    <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.MyBroadcastReceiver<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>enabled</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>exported</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span> <span class="token attr-name"><span class="token namespace">android:</span>priority</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.example.broadcasttest01.MY_BROADCAST<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>receiver</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol start="3">
<li>截断代码，在OnReceive()方法中添加abortBroadcast（）方法。</li>
</ol>
<h2 id="使用本地广播"><a href="#使用本地广播" class="headerlink" title="使用本地广播"></a>使用本地广播</h2><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> IntentFilter intentFilter<span class="token punctuation">;</span>

    <span class="token keyword">private</span> LocalReceiver localReceiver<span class="token punctuation">;</span>

    <span class="token keyword">private</span> LocalBroadcastManager localBroadcastManager<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Button button <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span>
        localBroadcastManager <span class="token operator">=</span> LocalBroadcastManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        button<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span>View view<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Intent intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token string">"com.example.LOCAL_BROADCAST"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                localBroadcastManager<span class="token punctuation">.</span><span class="token function">sendBroadcast</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        intentFilter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntentFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        intentFilter<span class="token punctuation">.</span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token string">"com.example.LOCAL_BROADCAST"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        localReceiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LocalReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        localBroadcastManager<span class="token punctuation">.</span><span class="token function">registerReceiver</span><span class="token punctuation">(</span>localReceiver<span class="token punctuation">,</span>intentFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        localBroadcastManager<span class="token punctuation">.</span><span class="token function">unregisterReceiver</span><span class="token punctuation">(</span>localReceiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">LocalReceiver</span> <span class="token keyword">extends</span> <span class="token class-name">BroadcastReceiver</span><span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceive</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> Intent intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span><span class="token string">"received in local broadcast"</span><span class="token punctuation">,</span>Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>主要使用一个LocalBroadcastManager来对广播进行管理</p>
<ol>
<li><p>新建类LocalReceiver继承自BroadcastReceiver()</p>
</li>
<li><p>通过LocalBroadcastManager.getInstance(this)方法得到实例</p>
</li>
<li><p>调用LocalBroadcastManager的registerReceiver()方法注册广播接收器</p>
</li>
<li><p>调用localBroadcastManager.sendBroadcast()方法发送广播</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Broadcast</tag>
      </tags>
  </entry>
  <entry>
    <title>安卓开发（五）碎片的实践</title>
    <url>/2021/09/10/AndroidDevelopment08/</url>
    <content><![CDATA[<h2 id="新闻内容的布局"><a href="#新闻内容的布局" class="headerlink" title="新闻内容的布局"></a>新闻内容的布局</h2><pre class="line-numbers language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/visibility_layout<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>visibility</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>visible<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/news_tittle<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#000<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/news_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1dp<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentLeft</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#000<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>NewsContentFragment类</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NewsContentFragment</span> <span class="token keyword">extends</span> <span class="token class-name">Fragment</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> View view<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Nullable</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> View <span class="token function">onCreateView</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> LayoutInflater inflater<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> ViewGroup container<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        view <span class="token operator">=</span> inflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>news_content_frag<span class="token punctuation">,</span>container<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> view<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">refresh</span><span class="token punctuation">(</span>String newsTittle<span class="token punctuation">,</span>String newsContent<span class="token punctuation">)</span><span class="token punctuation">{</span>
        View visibilityLayout <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>visibility_layout<span class="token punctuation">)</span><span class="token punctuation">;</span>
        visibilityLayout<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span>View<span class="token punctuation">.</span>VISIBLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        TextView newsTittleText <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>news_tittle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        TextView newsContentText <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>news_content<span class="token punctuation">)</span><span class="token punctuation">;</span>
        newsTittleText<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>newsTittle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        newsContentText<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>newsContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>提供了refresh（）方法将新闻内容和题目显示在界面上。</p>
<p><strong>news_content布局</strong></p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fragment</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/news_content_fragment<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.example.newspaper.NewsContentFragment<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>直接在布局中引用了NewsContentActivity，相当于把news_content_frag布局加入</p>
<p><strong>NewsContentActivity类</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NewsContentActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">actionStart</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span>String newsTittle<span class="token punctuation">,</span>String newsContent<span class="token punctuation">)</span><span class="token punctuation">{</span>
        Intent intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span>NewsContentActivity<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string">"news_title"</span><span class="token punctuation">,</span>newsTittle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string">"news_content"</span><span class="token punctuation">,</span>newsContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>news_content<span class="token punctuation">)</span><span class="token punctuation">;</span>
        String newsTitle <span class="token operator">=</span> <span class="token function">getIntent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getStringExtra</span><span class="token punctuation">(</span><span class="token string">"news_title"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//获取传入的新闻标题</span>
        String newsContent <span class="token operator">=</span> <span class="token function">getIntent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getStringExtra</span><span class="token punctuation">(</span><span class="token string">"news_content"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//获取传入的新闻内容</span>
        NewsContentFragment newsContentFragment <span class="token operator">=</span> <span class="token punctuation">(</span>NewsContentFragment<span class="token punctuation">)</span>
                <span class="token function">getSupportFragmentManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFragmentById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>news_content_fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        newsContentFragment<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span>newsTitle<span class="token punctuation">,</span>newsContent<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//刷新NewsContentFragment界面</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/2021/09/10/AndroidDevelopment08/1631265768592.png"></p>
<p><strong>news_item布局</strong></p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/news_tittle<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>singleLine</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>ellipsize</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>end<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>paddingLeft</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>paddingRight</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>paddingTop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ellipse：文本的缩略方式（end：在尾部缩略）</p>
<p><strong>NewsTitleFragment类</strong></p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NewsTitleFragment</span> <span class="token keyword">extends</span> <span class="token class-name">Fragment</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">boolean</span> isTwoPane<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Nullable</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> View <span class="token function">onCreateView</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> LayoutInflater inflater<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> ViewGroup container<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        View view <span class="token operator">=</span> inflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>news_title_frag<span class="token punctuation">,</span>container<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> view<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onActivityCreated</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onActivityCreated</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">getActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>news_content_layout<span class="token punctuation">)</span><span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>
            isTwoPane <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            isTwoPane <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>通过能否找到news_content_layout来判断当前是双页还是单页</p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FrameLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/news_tittle_layout<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fragment</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/news_tittle_fragment<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.example.newspaper.NewsTitleFragment<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FrameLayout</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>单页指挥加载一个碎片</p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>horizontal<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fragment</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/news_title_fragment<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.example.newspaper.NewsTitleFragment<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FrameLayout</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/news_content_layout<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        &lt;fragment
            android:id="@+id/news_content_fragment"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FrameLayout</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>双页加载</p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Fragment</tag>
      </tags>
  </entry>
  <entry>
    <title>安卓开发（六）广播的最佳实例</title>
    <url>/2021/09/14/AndroidDevelopment10/</url>
    <content><![CDATA[<h2 id="创建AcitivityCollector类"><a href="#创建AcitivityCollector类" class="headerlink" title="创建AcitivityCollector类"></a>创建AcitivityCollector类</h2><p>管理所有活动</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ActivityCollector</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> List<span class="token operator">&lt;</span>Activity<span class="token operator">></span> activities <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">addActivity</span><span class="token punctuation">(</span>Activity activity<span class="token punctuation">)</span><span class="token punctuation">{</span>
        activities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>activity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">removeActivity</span><span class="token punctuation">(</span>Activity activity<span class="token punctuation">)</span><span class="token punctuation">{</span>
        activities<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>activity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">finishAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>Activity activity<span class="token operator">:</span>activities<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>activities<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                activity<span class="token punctuation">.</span><span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="创建BaseActivity作为所有活动父类"><a href="#创建BaseActivity作为所有活动父类" class="headerlink" title="创建BaseActivity作为所有活动父类"></a>创建BaseActivity作为所有活动父类</h2><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BaseActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> ForceOffLineReceiver receiver<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        IntentFilter intentFilter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntentFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        intentFilter<span class="token punctuation">.</span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token string">"com.example.broadcastbestpractice.FORCE_OFFLINE"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        receiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ForceOffLineReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">registerReceiver</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span>intentFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>receiver<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">unregisterReceiver</span><span class="token punctuation">(</span>receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
            receiver <span class="token operator">=</span> null<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ActivityCollector<span class="token punctuation">.</span><span class="token function">addActivity</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ActivityCollector<span class="token punctuation">.</span><span class="token function">removeActivity</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">ForceOffLineReceiver</span> <span class="token keyword">extends</span> <span class="token class-name">BroadcastReceiver</span><span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceive</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> Intent intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            AlertDialog<span class="token punctuation">.</span>Builder builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AlertDialog<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
            builder<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">"Warning"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            builder<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">"You are forced to be offline"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            builder<span class="token punctuation">.</span><span class="token function">setCancelable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            builder<span class="token punctuation">.</span><span class="token function">setPositiveButton</span><span class="token punctuation">(</span><span class="token string">"OK"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">DialogInterface<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span>DialogInterface dialogInterface<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    ActivityCollector<span class="token punctuation">.</span><span class="token function">finishAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    Intent intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span>LoginActivity<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    context<span class="token punctuation">.</span><span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            builder<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="ForceOfflineReceiver"><a href="#ForceOfflineReceiver" class="headerlink" title="ForceOfflineReceiver"></a>ForceOfflineReceiver</h3><ol>
<li>使用AlertDialog.Builder来构建一个对话框</li>
<li>调用setCancelable（）方法将对话框设置为不可取消</li>
<li>调用setPositiveButton（）方法来给对话框注册确定按钮</li>
</ol>
<h2 id="修改LoginActivity类"><a href="#修改LoginActivity类" class="headerlink" title="修改LoginActivity类"></a>修改LoginActivity类</h2><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginActivity</span> <span class="token keyword">extends</span> <span class="token class-name">BaseActivity</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> EditText accountEdit<span class="token punctuation">;</span>
    <span class="token keyword">private</span> EditText passwordEdit<span class="token punctuation">;</span>
    <span class="token keyword">private</span> Button login<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_login<span class="token punctuation">)</span><span class="token punctuation">;</span>
        accountEdit <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>account<span class="token punctuation">)</span><span class="token punctuation">;</span>
        passwordEdit <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        login <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>login<span class="token punctuation">)</span><span class="token punctuation">;</span>
        login<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span>View view<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                String account <span class="token operator">=</span> accountEdit<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                String password <span class="token operator">=</span> passwordEdit<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//密码是123456.用户名为admin</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>account<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>password<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    Intent intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span>LoginActivity<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span>MainActivity<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                    Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>LoginActivity<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"account or password is invalid"</span><span class="token punctuation">,</span>Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="修改MainActivity中的代码"><a href="#修改MainActivity中的代码" class="headerlink" title="修改MainActivity中的代码"></a>修改MainActivity中的代码</h2><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">BaseActivity</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Button forceOffline <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>force_offline<span class="token punctuation">)</span><span class="token punctuation">;</span>
        forceOffline<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span>View view<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Intent intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token string">"com.example.broadcastbestpractice.FORCE_OFFLINE"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">sendBroadcast</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Broadcast</tag>
      </tags>
  </entry>
  <entry>
    <title>AndroidDevelopment11</title>
    <url>/2021/09/16/AndroidDevelopment11/</url>
    <content><![CDATA[<h1 id="Materai-Design实践"><a href="#Materai-Design实践" class="headerlink" title="Materai Design实践"></a>Materai Design实践</h1><h2 id="Toolbar"><a href="#Toolbar" class="headerlink" title="Toolbar"></a>Toolbar</h2><p><strong>themes.xml中的设置</strong></p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Theme.MaterialTest<span class="token punctuation">"</span></span> <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Theme.AppCompat.Light.NoActionBar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!-- Primary brand color. --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>colorPrimary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>@color/purple_500<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>colorPrimaryVariant<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>@color/purple_700<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>colorOnPrimary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>@color/white<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!-- Secondary brand color. --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>colorSecondary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>@color/teal_200<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>colorSecondaryVariant<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>@color/teal_700<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>colorOnSecondary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>@color/black<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!-- Status bar color. --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android:statusBarColor<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">tools:</span>targetApi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>l<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>?attr/colorPrimaryVariant<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!-- Customize your theme here. --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/2021/09/16/AndroidDevelopment11/image-20210916222400495.png"></p>
<p>除此之外还可一通过textColorPrimary\windowBackground和navigationBarColor等属性控制其他位置的颜色</p>
<p><strong>用ToolBar代替ActionBar中的代码</strong></p>
<p>更改activity_main.xml中的代码</p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FrameLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Toolbar</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/toolbar<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>?attr/actionBarSize<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>?attr/colorPrimary<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>theme</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@style/ThemeOverlay.AppCompat.Dark.ActionBar<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>popupTheme</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@style/ThemeOverlay.AppCompat.Light<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FrameLayout</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li>用xmlns.app指定了一个新的命名空间</li>
<li>用app.:popupTheme属性将弹出的菜单指定成单色主题</li>
</ol>
<p>更改MainActivity中的代码</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>
        androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>Toolbar toolbar<span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>toolbar<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setSupportActionBar</span><span class="token punctuation">(</span>toolbar<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在menu文件夹下新建toolbar.xml文件</p>
<pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>menu</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/backup<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>icon</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@drawable/button<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Backup<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">app:</span>showAsAction</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>always<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/delete<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>icon</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@drawable/button<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Delete<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">app:</span>showAsAction</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ifRoom<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/settings<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>icon</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@drawable/button<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Settings<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">app:</span>showAsAction</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>never<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>menu</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>showAsAction：</p>
<ol>
<li>always永远显示在toolbar中</li>
<li>ifRoom表示屏幕空间足够时在Toolbar中显示，不够就显示在菜单中</li>
<li>never表示永远显示在菜单中</li>
</ol>
]]></content>
  </entry>
  <entry>
    <title>编译原理（一）概论</title>
    <url>/2021/09/06/CompileTechnical01/</url>
    <content><![CDATA[<h2 id="编译器在语言处理系统中的位置"><a href="#编译器在语言处理系统中的位置" class="headerlink" title="编译器在语言处理系统中的位置"></a>编译器在语言处理系统中的位置</h2><p><img src="/2021/09/06/CompileTechnical01/1631415856819.png"></p>
<p>链接器：</p>
<p>将多个可重定位的机器代码文件连接到一起</p>
<p>解决外部内存地址问题</p>
<h2 id="编译系统的结构"><a href="#编译系统的结构" class="headerlink" title="编译系统的结构"></a>编译系统的结构</h2><h3 id="翻译过程"><a href="#翻译过程" class="headerlink" title="翻译过程"></a>翻译过程</h3><p><img src="/2021/09/06/CompileTechnical01/1631416283170.png"></p>
<p>词法分析：确定句子中各个单词的词性</p>
<p>语法分析：识别句子中各类短语从而获得句子结构</p>
<p>语义分析： 分析各个短语在句子中充当什么成分，得到短语之间的关系</p>
<h3 id="编译器结构"><a href="#编译器结构" class="headerlink" title="编译器结构"></a>编译器结构</h3><img src="/2021/09/06/CompileTechnical01/1631416517620.png" style="zoom: 67%;">

<hr>
<h2 id="词法分析概述"><a href="#词法分析概述" class="headerlink" title="词法分析概述"></a>词法分析概述</h2><h3 id="词法分析-扫描（Scanning）"><a href="#词法分析-扫描（Scanning）" class="headerlink" title="词法分析/扫描（Scanning）"></a>词法分析/扫描（Scanning）</h3><p><strong>主要任务：</strong></p>
<p>从左向右逐行扫面源程序的字符，识别出每一个单词，确定单词的类型。将识别出的单词转换成统一的<strong>机内表示</strong>——词法单元（token）形式</p>
<p><strong>token：</strong>&lt;种别码，属性值&gt;</p>
<p><img src="/2021/09/06/CompileTechnical01/1631416872548.png"></p>
<p><strong>例：</strong></p>
<img src="/2021/09/06/CompileTechnical01/1631416949744.png" style="zoom:67%;">





<h2 id="语法分析概述"><a href="#语法分析概述" class="headerlink" title="语法分析概述"></a>语法分析概述</h2><p>语法分析器（parser）从单词分析器输出的token序列中识别出各类短语，并构造<strong>语法分析树</strong>（prase tree）</p>
<p><img src="/2021/09/06/CompileTechnical01/1631417219451.png"></p>
<h3 id="例1：赋值语句的分析树"><a href="#例1：赋值语句的分析树" class="headerlink" title="例1：赋值语句的分析树"></a>例1：赋值语句的分析树</h3><img src="/2021/09/06/CompileTechnical01/1631417286626.png" style="zoom:80%;">



<h3 id="例2：变量声明语句的分析树"><a href="#例2：变量声明语句的分析树" class="headerlink" title="例2：变量声明语句的分析树"></a>例2：变量声明语句的分析树</h3> <img src="/2021/09/06/CompileTechnical01/1631417462314.png" style="zoom:80%;">





<h2 id="语义分析概述"><a href="#语义分析概述" class="headerlink" title="语义分析概述"></a>语义分析概述</h2><h3 id="收集标识符的属性信息："><a href="#收集标识符的属性信息：" class="headerlink" title="收集标识符的属性信息："></a>收集标识符的属性信息：</h3><ol>
<li>种类：简单变量，复合变量，过程</li>
<li>类型：整型、bool型···</li>
<li>存储长度、长度</li>
<li>值</li>
<li>作用域</li>
<li>参数和返回值信息</li>
</ol>
<h3 id="符号表和字符串表"><a href="#符号表和字符串表" class="headerlink" title="符号表和字符串表"></a>符号表和字符串表</h3><p><img src="/2021/09/06/CompileTechnical01/1631417842788.png" alt="1631417842788"></p>
<h3 id="语义检查"><a href="#语义检查" class="headerlink" title="语义检查"></a>语义检查</h3><p><img src="/2021/09/06/CompileTechnical01/1631417970126.png"></p>
<h2 id="中间代码生成及编译后端概述"><a href="#中间代码生成及编译后端概述" class="headerlink" title="中间代码生成及编译后端概述"></a>中间代码生成及编译后端概述</h2><h3 id="常用中间表示形式："><a href="#常用中间表示形式：" class="headerlink" title="常用中间表示形式："></a>常用中间表示形式：</h3><p><strong>三地址码</strong></p>
<p><strong>语法结构树/语法树</strong></p>
<h4 id="三地址码："><a href="#三地址码：" class="headerlink" title="三地址码："></a><strong>三地址码：</strong></h4><p>三地址码由类似于汇编语言的指令序列组成，每个指令最多由三个操作数</p>
<p><img src="/2021/09/06/CompileTechnical01/1631418278417.png"></p>
<p><strong>地址可具有如下形式之一：</strong></p>
<p>源程序中的名字；常量；编译器中的临时变量</p>
<p><strong>三地址指令的表示</strong>：</p>
<img src="/2021/09/06/CompileTechnical01/1631418496974.png" style="zoom:50%;">

<p>例：</p>
<img src="/2021/09/06/CompileTechnical01/1631418564645.png" style="zoom:80%;">

<p>一个三地址指令确定了一个唯一运算完成的顺序。</p>
<h4 id="中间代码生成的例子"><a href="#中间代码生成的例子" class="headerlink" title="中间代码生成的例子"></a>中间代码生成的例子</h4><p><img src="/2021/09/06/CompileTechnical01/1631418746359.png"></p>
<h3 id="目标代码生成："><a href="#目标代码生成：" class="headerlink" title="目标代码生成："></a>目标代码生成：</h3><p>目标代码生成以源程序的<strong>中间表示形式</strong>作为输入，并把它映射到<strong>目标语言</strong></p>
<p>目标代码生成一个重要任务是为程序中使用的变量<strong>合理分配寄存器</strong></p>
<h3 id="代码优化："><a href="#代码优化：" class="headerlink" title="代码优化："></a>代码优化：</h3><p>为改进代码所进行的等价程序变换，使其运行得更快一些、占用空间更少一些，或者二者兼顾。</p>
]]></content>
      <categories>
        <category>编译原理</category>
      </categories>
      <tags>
        <tag>编译原理</tag>
      </tags>
  </entry>
  <entry>
    <title>编译原理（二）词法分析器</title>
    <url>/2021/09/06/CompileTechnical02/</url>
    <content><![CDATA[<h1 id="词法分析器"><a href="#词法分析器" class="headerlink" title="词法分析器"></a>词法分析器</h1><p>词法分析是对源程序进行的首次分析，实现词法分析的程序称为<strong>词法分析程序</strong></p>
<h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><ol>
<li><p>读入字符串</p>
</li>
<li><p>进行预处理工作</p>
<p>包括取消注释，剔除无用的空格键、跳格、回车、换行等</p>
</li>
<li><p>将预处理后的字符串转换为<strong>单词流</strong>输出</p>
</li>
</ol>
<h2 id="单词的识别"><a href="#单词的识别" class="headerlink" title="单词的识别"></a>单词的识别</h2><h3 id="分类："><a href="#分类：" class="headerlink" title="分类："></a>分类：</h3><ol>
<li>标识词：变量名、函数名等</li>
<li>基本字：如if、while、for等</li>
<li>常数：如整型、浮点型等</li>
<li>运算符：+-*/等</li>
<li>界符：包括,  ;  :  //  /* */等</li>
</ol>
<h3 id="表示方法"><a href="#表示方法" class="headerlink" title="表示方法"></a>表示方法</h3><p>通常一个单词用一个二元式来表示：</p>
<p>&lt;单词类型,单词的属性&gt;</p>
<p>例:</p>
<pre><code>int i=0;
</code></pre>
<p>识别的中间码：</p>
<pre><code>&lt;int的编码, - &gt;
&lt;标识符的编码,&quot;i&quot;&gt;
&lt;=的编码, - &gt;
&lt;常数的编码,常数0&gt;
&lt;;的编码, - &gt;
</code></pre>
<h2 id="状态转换图"><a href="#状态转换图" class="headerlink" title="状态转换图"></a>状态转换图</h2><p>状态转化图（转换图）是一张有限方向图，结点表示状态（State），有向边表示状态间的转换（Transition），有向边上标记的字符表示状态转换的条件。</p>
<p>状态数量是有限的，其中必有一个初始状态（双箭头指向），若干个终止状态（双圆圈表示）</p>
<p>某些终止状态是在多识别一个字符后才成为识别状态的，对这种情况多识别的字符予以退回，在终态上标“*”区别</p>
<p><img src="/2021/09/06/CompileTechnical02/1631068043131.png"></p>
]]></content>
      <categories>
        <category>编译原理</category>
      </categories>
      <tags>
        <tag>编译原理</tag>
      </tags>
  </entry>
  <entry>
    <title>编译原理（三）语言及其文法</title>
    <url>/2021/09/08/CompileTechnical03/</url>
    <content><![CDATA[<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><h3 id="字母表（Alphabet）"><a href="#字母表（Alphabet）" class="headerlink" title="字母表（Alphabet）"></a>字母表（Alphabet）</h3><p><strong>字母表∑是一个有穷符号集合</strong></p>
<p>符号：字母、数字、标点···</p>
<p><img src="/2021/09/08/CompileTechnical03/1631427430401-16314274433141.png"></p>
<h4 id="字母表的运算"><a href="#字母表的运算" class="headerlink" title="字母表的运算"></a>字母表的运算</h4><p>乘积：</p>
<p><img src="/2021/09/08/CompileTechnical03/1631427506335.png"></p>
<p>n次幂：</p>
<p><img src="/2021/09/08/CompileTechnical03/1631427551449.png"></p>
<p>正闭包：</p>
<p><img src="/2021/09/08/CompileTechnical03/1631427620613.png"></p>
<p>克林闭包：</p>
<p><img src="/2021/09/08/CompileTechnical03/1631427703580.png"></p>
<h3 id="串"><a href="#串" class="headerlink" title="串"></a>串</h3><p><img src="/2021/09/08/CompileTechnical03/1631427794545.png"></p>
<p><img src="/2021/09/08/CompileTechnical03/1631427815604.png"></p>
<h4 id="串上的运算："><a href="#串上的运算：" class="headerlink" title="串上的运算："></a>串上的运算：</h4><p>连接：</p>
<p><img src="/2021/09/08/CompileTechnical03/image-20210912143008677.png"></p>
<p>幂运算：</p>
<p><img src="/2021/09/08/CompileTechnical03/image-20210912143111064.png"></p>
<h2 id="文法的定义"><a href="#文法的定义" class="headerlink" title="文法的定义"></a>文法的定义</h2><h3 id="自然语言的例子"><a href="#自然语言的例子" class="headerlink" title="自然语言的例子"></a>自然语言的例子</h3><p><img src="/2021/09/08/CompileTechnical03/1631066388769.png"></p>
<p>&lt;语法成分&gt;—-&gt;语言的基本符号</p>
<h3 id="文法形式化定义"><a href="#文法形式化定义" class="headerlink" title="文法形式化定义"></a>文法形式化定义</h3><p><strong>终结符</strong></p>
<p><img src="/2021/09/08/CompileTechnical03/1631067074489.png"></p>
<p><strong>非终结符</strong><img src="/2021/09/08/CompileTechnical03/1631067116318.png"></p>
<p><strong>产生式集合</strong></p>
<p><img src="/2021/09/08/CompileTechnical03/1631067215559.png"></p>
<p><img src="/2021/09/08/CompileTechnical03/1631067329740.png"></p>
<p><strong>开始符号</strong></p>
<img src="/2021/09/08/CompileTechnical03/1631067410774.png" style="zoom: 50%;">

<p>开始符号表示该文法中最大的语法成分</p>
<p>例： S=&lt;句子&gt;</p>
<p><strong>文法表示</strong></p>
<p><img src="/2021/09/08/CompileTechnical03/image-20210912144829948.png"></p>
<h4 id="产生式的简写"><a href="#产生式的简写" class="headerlink" title="产生式的简写"></a>产生式的简写</h4><p><img src="/2021/09/08/CompileTechnical03/image-20210912145002125.png"></p>
<h4 id="符号约定"><a href="#符号约定" class="headerlink" title="符号约定"></a>符号约定</h4><p><img src="/2021/09/08/CompileTechnical03/image-20210912145437200.png"></p>
<p><img src="/2021/09/08/CompileTechnical03/image-20210912145547004.png"></p>
<p><img src="/2021/09/08/CompileTechnical03/image-20210912145646206.png"></p>
<p><img src="/2021/09/08/CompileTechnical03/image-20210912145815658.png"></p>
<h2 id="语言的形式化定义"><a href="#语言的形式化定义" class="headerlink" title="语言的形式化定义"></a>语言的形式化定义</h2><h3 id="推导和归约"><a href="#推导和归约" class="headerlink" title="推导和归约"></a>推导和归约</h3><p><img src="/2021/09/08/CompileTechnical03/image-20210912150225452.png"></p>
<p><img src="/2021/09/08/CompileTechnical03/image-20210912150316670.png"></p>
<p><strong>例子：</strong></p>
<p><img src="/2021/09/08/CompileTechnical03/image-20210912150417460.png"></p>
<p><strong>如何判断某一词串是否是该文法的句子：</strong></p>
<p><img src="/2021/09/08/CompileTechnical03/image-20210912150658480.png"></p>
<h3 id="句型和句子"><a href="#句型和句子" class="headerlink" title="句型和句子"></a>句型和句子</h3><p><img src="/2021/09/08/CompileTechnical03/image-20210912151143183.png"></p>
<p><strong>例子：</strong></p>
<p><img src="/2021/09/08/CompileTechnical03/image-20210912151234666.png"></p>
<p><img src="/2021/09/08/CompileTechnical03/image-20210912151602748.png"></p>
<h2 id="Chomsky文法分类体系"><a href="#Chomsky文法分类体系" class="headerlink" title="Chomsky文法分类体系"></a>Chomsky文法分类体系</h2><h3 id="0型文法"><a href="#0型文法" class="headerlink" title="0型文法"></a>0型文法</h3><img src="/2021/09/08/CompileTechnical03/image-20210912152312993.png" style="zoom: 80%;">



<h3 id="1型文法"><a href="#1型文法" class="headerlink" title="1型文法"></a>1型文法</h3><img src="/2021/09/08/CompileTechnical03/image-20210912152833892.png" style="zoom:80%;">

<p><strong>ε-产生式：右部为空串的产生式</strong></p>
<h3 id="2型文法"><a href="#2型文法" class="headerlink" title="2型文法"></a>2型文法</h3><img src="/2021/09/08/CompileTechnical03/image-20210912153121027.png" style="zoom:80%;">

<img src="/2021/09/08/CompileTechnical03/image-20210912154056351.png" style="zoom:80%;">



<h3 id="3型文法"><a href="#3型文法" class="headerlink" title="3型文法"></a>3型文法</h3><p><img src="/2021/09/08/CompileTechnical03/image-20210912154530442.png"></p>
 <img src="/2021/09/08/CompileTechnical03/image-20210912155146911.png" style="zoom:80%;">



<h3 id="四种文法的关系："><a href="#四种文法的关系：" class="headerlink" title="四种文法的关系："></a>四种文法的关系：</h3><img src="/2021/09/08/CompileTechnical03/1631433173194.png" style="zoom:80%;">





<h2 id="CFG分析树"><a href="#CFG分析树" class="headerlink" title="CFG分析树"></a>CFG分析树</h2><p><img src="/2021/09/08/CompileTechnical03/image-20210912160412131.png"></p>
<img src="/2021/09/08/CompileTechnical03/image-20210912160519530.png" style="zoom:80%;">



<p><strong>（句型的）短语</strong></p>
<p><img src="/2021/09/08/CompileTechnical03/image-20210912161659518.png"></p>
<h3 id="二义性文法"><a href="#二义性文法" class="headerlink" title="二义性文法"></a><strong>二义性文法</strong></h3><p><img src="/2021/09/08/CompileTechnical03/image-20210912162014931.png"></p>
<p>例：</p>
<img src="/2021/09/08/CompileTechnical03/image-20210912162223446.png" style="zoom:67%;">



<h3 id="二义性文法的判定"><a href="#二义性文法的判定" class="headerlink" title="二义性文法的判定"></a><strong>二义性文法的判定</strong></h3><p><img src="/2021/09/08/CompileTechnical03/image-20210912162329248.png"></p>
]]></content>
      <categories>
        <category>编译原理</category>
      </categories>
      <tags>
        <tag>编译原理</tag>
      </tags>
  </entry>
  <entry>
    <title>编译原理（四）正则表达式</title>
    <url>/2021/09/13/CompileTechnical04/</url>
    <content><![CDATA[<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><p><img src="/2021/09/13/CompileTechnical04/image-20210913103353953.png"></p>
<h3 id="正则表达式的定义"><a href="#正则表达式的定义" class="headerlink" title="正则表达式的定义"></a>正则表达式的定义</h3><p><img src="/2021/09/13/CompileTechnical04/image-20210913103516059.png"></p>
<img src="/2021/09/13/CompileTechnical04/image-20210913103914688.png" style="zoom:50%;">



<h3 id="正则语言"><a href="#正则语言" class="headerlink" title="正则语言"></a>正则语言</h3><p><img src="/2021/09/13/CompileTechnical04/image-20210913103828514.png"></p>
<h3 id="RE的代数定律"><a href="#RE的代数定律" class="headerlink" title="RE的代数定律"></a>RE的代数定律</h3><p><img src="/2021/09/13/CompileTechnical04/image-20210913104140162.png"></p>
<h3 id="正则文法与正则表达式等价"><a href="#正则文法与正则表达式等价" class="headerlink" title="正则文法与正则表达式等价"></a>正则文法与正则表达式等价</h3><img src="/2021/09/13/CompileTechnical04/image-20210913104327585.png" style="zoom:67%;">



<h3 id="正则定义"><a href="#正则定义" class="headerlink" title="正则定义"></a>正则定义</h3><p><img src="/2021/09/13/CompileTechnical04/image-20210913104817879.png"></p>
<p>例：</p>
<img src="/2021/09/13/CompileTechnical04/image-20210913104849120.png" style="zoom:50%;">

]]></content>
      <categories>
        <category>编译原理</category>
      </categories>
      <tags>
        <tag>编译原理</tag>
        <tag>正则表达式</tag>
      </tags>
  </entry>
  <entry>
    <title>编译原理（六）自顶向下的分析</title>
    <url>/2021/09/15/CompileTechnical06/</url>
    <content><![CDATA[<h2 id="自顶向下的分析-（Top-Down-Parsing）"><a href="#自顶向下的分析-（Top-Down-Parsing）" class="headerlink" title="自顶向下的分析 （Top-Down Parsing）"></a>自顶向下的分析 （Top-Down Parsing）</h2><p><img src="/2021/09/15/CompileTechnical06/image-20210915091925663.png"></p>
<h3 id="最左推导（Left-mostDerivation）"><a href="#最左推导（Left-mostDerivation）" class="headerlink" title="最左推导（Left-mostDerivation）"></a>最左推导（Left-mostDerivation）</h3><p><img src="/2021/09/15/CompileTechnical06/image-20210915092045212.png"></p>
<h3 id="最右推导（Right-most-Derivation）"><a href="#最右推导（Right-most-Derivation）" class="headerlink" title="最右推导（Right-most Derivation）"></a>最右推导（Right-most Derivation）</h3><p><img src="/2021/09/15/CompileTechnical06/image-20210915092144182.png"></p>
<p>在自定向上的分析中，总是采用最左归约的方式，因此把<strong>最左归约</strong>称为<strong>规范归约</strong>，而<strong>最右推导</strong>相应地称为<strong>规范推导</strong></p>
<h3 id="最右推导和最左推导的唯一性"><a href="#最右推导和最左推导的唯一性" class="headerlink" title="最右推导和最左推导的唯一性"></a>最右推导和最左推导的唯一性</h3><p><img src="/2021/09/15/CompileTechnical06/image-20210915093257042.png"></p>
<p><strong>自顶向下的语法分析采用最左推导方式</strong></p>
<p>总是选择每个句型的最左非终结符进行替换</p>
<p>根据输入流中的下一个终结符，选择最左非终结符的一个候选式</p>
<p>例：</p>
<p><img src="/2021/09/15/CompileTechnical06/1631669772951.png"></p>
<h3 id="自顶向下语法分析的通用形式"><a href="#自顶向下语法分析的通用形式" class="headerlink" title="自顶向下语法分析的通用形式"></a>自顶向下语法分析的通用形式</h3><p><img src="/2021/09/15/CompileTechnical06/image-20210915094352344.png"></p>
<h3 id="预测分析"><a href="#预测分析" class="headerlink" title="预测分析"></a>预测分析</h3><p><img src="/2021/09/15/CompileTechnical06/image-20210915095115483.png"></p>
<h2 id="文法转换"><a href="#文法转换" class="headerlink" title="文法转换"></a>文法转换</h2><p><strong>问题1</strong></p>
<img src="/2021/09/15/CompileTechnical06/image-20210915095557128.png" style="zoom:67%;">

<p><strong>问题2</strong></p>
<img src="/2021/09/15/CompileTechnical06/image-20210915095625817.png" alt="image-20210915095625817" style="zoom:67%;">



<h3 id="消除直接左递归"><a href="#消除直接左递归" class="headerlink" title="消除直接左递归"></a>消除直接左递归</h3><p><img src="/2021/09/15/CompileTechnical06/image-20210917151108735.png"></p>
<p><strong>消除左递归的一般形式</strong></p>
<p><img src="/2021/09/15/CompileTechnical06/image-20210917151306750.png"></p>
<h3 id="消除间接左递归"><a href="#消除间接左递归" class="headerlink" title="消除间接左递归"></a>消除间接左递归</h3><p><img src="/2021/09/15/CompileTechnical06/image-20210917152125244.png"></p>
<p><img src="/2021/09/15/CompileTechnical06/image-20210917152305490.png"></p>
<h3 id="提取左公因子"><a href="#提取左公因子" class="headerlink" title="提取左公因子"></a>提取左公因子</h3><p><img src="/2021/09/15/CompileTechnical06/image-20210917152442550.png"></p>
<p><img src="/2021/09/15/CompileTechnical06/image-20210917152844195.png"></p>
<h2 id="LL-1-文法"><a href="#LL-1-文法" class="headerlink" title="LL(1)文法"></a>LL(1)文法</h2><p><img src="/2021/09/15/CompileTechnical06/image-20210917153215934.png"></p>
<p>例：</p>
<p><img src="/2021/09/15/CompileTechnical06/image-20210917153737301.png"></p>
<h4 id="非终结符的后继符号级"><a href="#非终结符的后继符号级" class="headerlink" title="非终结符的后继符号级"></a>非终结符的后继符号级</h4><p><img src="/2021/09/15/CompileTechnical06/image-20210917155114722.png"></p>
<h4 id="产生式的可选集"><a href="#产生式的可选集" class="headerlink" title="产生式的可选集"></a>产生式的可选集</h4><p><img src="/2021/09/15/CompileTechnical06/image-20210917155712456.png"></p>
<h4 id="串首终结符集"><a href="#串首终结符集" class="headerlink" title="串首终结符集"></a>串首终结符集</h4><p><img src="/2021/09/15/CompileTechnical06/image-20210917160516778.png"></p>
<h4 id="LL-1-文法-1"><a href="#LL-1-文法-1" class="headerlink" title="LL(1)文法"></a>LL(1)文法</h4><p><img src="/2021/09/15/CompileTechnical06/image-20210917161259083.png"></p>
<p><img src="/2021/09/15/CompileTechnical06/image-20210917161342550.png"></p>
<h2 id="FIRST集和FOLLOW集的计算"><a href="#FIRST集和FOLLOW集的计算" class="headerlink" title="FIRST集和FOLLOW集的计算"></a>FIRST集和FOLLOW集的计算</h2><p><strong>计算FIRST集</strong></p>
<p><img src="/2021/09/15/CompileTechnical06/image-20210918113202668.png"></p>
<p><img src="/2021/09/15/CompileTechnical06/image-20210917161922136.png"></p>
<p><strong>计算FOLLOW集</strong></p>
<p><img src="/2021/09/15/CompileTechnical06/image-20210918113224532.png"></p>
<p><img src="/2021/09/15/CompileTechnical06/image-20210918113239292.png"></p>
<p><strong>计算SELECT集</strong></p>
<p><img src="/2021/09/15/CompileTechnical06/image-20210918113340666.png"></p>
]]></content>
      <categories>
        <category>编译原理</category>
      </categories>
      <tags>
        <tag>编译原理</tag>
      </tags>
  </entry>
  <entry>
    <title>编译原理（五）有穷自动机</title>
    <url>/2021/09/13/CompileTechnical05/</url>
    <content><![CDATA[<h2 id="有穷自动机"><a href="#有穷自动机" class="headerlink" title="有穷自动机"></a>有穷自动机</h2><p><img src="/2021/09/13/CompileTechnical05/image-20210913110558275.png"></p>
<h3 id="FA的典型例子"><a href="#FA的典型例子" class="headerlink" title="FA的典型例子"></a>FA的典型例子</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913111631646.png"></p>
<h3 id="FA模型"><a href="#FA模型" class="headerlink" title="FA模型"></a>FA模型</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913111732614.png"></p>
<h3 id="FA的表示"><a href="#FA的表示" class="headerlink" title="FA的表示"></a>FA的表示</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913111848121.png"></p>
<h3 id="最长子串匹配原则（Longest-String-Matching-Principle）"><a href="#最长子串匹配原则（Longest-String-Matching-Principle）" class="headerlink" title="最长子串匹配原则（Longest String Matching Principle）"></a>最长子串匹配原则（Longest String Matching Principle）</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913112130173.png"></p>
<h2 id="FA的分类"><a href="#FA的分类" class="headerlink" title="FA的分类"></a>FA的分类</h2><p><img src="/2021/09/13/CompileTechnical05/image-20210913112310989.png"></p>
<h3 id="确定的有穷自动机（DFA）"><a href="#确定的有穷自动机（DFA）" class="headerlink" title="确定的有穷自动机（DFA）"></a>确定的有穷自动机（DFA）</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913112408235.png"></p>
<p>例：</p>
<p><img src="/2021/09/13/CompileTechnical05/image-20210913112547422.png"></p>
<h3 id="非确定的有穷自动机（NFA）"><a href="#非确定的有穷自动机（NFA）" class="headerlink" title="非确定的有穷自动机（NFA）"></a>非确定的有穷自动机（NFA）</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913112816595.png"></p>
<p>例：</p>
<p><img src="/2021/09/13/CompileTechnical05/image-20210913113105794.png"></p>
<h3 id="DFA和NFA的等价性"><a href="#DFA和NFA的等价性" class="headerlink" title="DFA和NFA的等价性"></a>DFA和NFA的等价性</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913113209744.png"></p>
<p>例：</p>
<p><img src="/2021/09/13/CompileTechnical05/image-20210913113401567.png"></p>
<h3 id="带有“ε-边”的NFA"><a href="#带有“ε-边”的NFA" class="headerlink" title="带有“ε-边”的NFA"></a>带有“ε-边”的NFA</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913113547309.png"></p>
<h3 id="带有和不带有“ε-边”的NFA的等价性"><a href="#带有和不带有“ε-边”的NFA的等价性" class="headerlink" title="带有和不带有“ε-边”的NFA的等价性"></a>带有和不带有“ε-边”的NFA的等价性</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913113806553.png"></p>
<h3 id="DAF的算法实现"><a href="#DAF的算法实现" class="headerlink" title="DAF的算法实现"></a>DAF的算法实现</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913114040891.png"></p>
<h2 id="从正则表达式到有穷自动机"><a href="#从正则表达式到有穷自动机" class="headerlink" title="从正则表达式到有穷自动机"></a>从正则表达式到有穷自动机</h2><p><img src="/2021/09/13/CompileTechnical05/image-20210913114442039.png"></p>
<h3 id="根据RE构造NFA"><a href="#根据RE构造NFA" class="headerlink" title="根据RE构造NFA"></a>根据RE构造NFA</h3><img src="/2021/09/13/CompileTechnical05/image-20210913114513431.png" style="zoom: 67%;">



<p><img src="/2021/09/13/CompileTechnical05/image-20210913114751466.png"></p>
<img src="/2021/09/13/CompileTechnical05/image-20210913114836905.png" style="zoom:80%;">

<h3 id="从NFA到DFA的转换"><a href="#从NFA到DFA的转换" class="headerlink" title="从NFA到DFA的转换"></a>从NFA到DFA的转换</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913151805953.png"></p>
<p>可见，DFA中的状态是NFA中若干状态的集合</p>
<img src="/2021/09/13/CompileTechnical05/image-20210913152400310.png" style="zoom:80%;">

<p><img src="/2021/09/13/CompileTechnical05/image-20210913152807437.png" alt="image-20210913152807437"></p>
<h3 id="计算-closure（T）"><a href="#计算-closure（T）" class="headerlink" title="计算-closure（T）"></a>计算-closure（T）</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913153232065.png"></p>
<h2 id="识别单词的DFA"><a href="#识别单词的DFA" class="headerlink" title="识别单词的DFA"></a>识别单词的DFA</h2><h3 id="识别标识符的正则表达式"><a href="#识别标识符的正则表达式" class="headerlink" title="识别标识符的正则表达式"></a>识别标识符的正则表达式</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913154102608.png"></p>
<h3 id="识别无符号数的DFA"><a href="#识别无符号数的DFA" class="headerlink" title="识别无符号数的DFA"></a>识别无符号数的DFA</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913154233027.png"></p>
<p><img src="/2021/09/13/CompileTechnical05/image-20210913154619752.png"></p>
<h3 id="识别无符号数的DFA-1"><a href="#识别无符号数的DFA-1" class="headerlink" title="识别无符号数的DFA"></a>识别无符号数的DFA</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913154939740.png"></p>
<h3 id="识别注释的DFA"><a href="#识别注释的DFA" class="headerlink" title="识别注释的DFA"></a>识别注释的DFA</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913155223841.png"></p>
<h3 id="总结：识别Token的DFA"><a href="#总结：识别Token的DFA" class="headerlink" title="总结：识别Token的DFA"></a>总结：识别Token的DFA</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913155515955.png"></p>
<h2 id="词法分析阶段的错误处理"><a href="#词法分析阶段的错误处理" class="headerlink" title="词法分析阶段的错误处理"></a>词法分析阶段的错误处理</h2><h3 id="可检测的错误类型"><a href="#可检测的错误类型" class="headerlink" title="可检测的错误类型"></a>可检测的错误类型</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913155816099.png"></p>
<h3 id="词法错误检测"><a href="#词法错误检测" class="headerlink" title="词法错误检测"></a>词法错误检测</h3><p>如果当前状态与当前输入符号在转换表中对应项的信息为空，则报错，调用错误处理程序</p>
<h3 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913162921960.png"></p>
<h3 id="错误回复策略"><a href="#错误回复策略" class="headerlink" title="错误回复策略"></a>错误回复策略</h3><p><img src="/2021/09/13/CompileTechnical05/image-20210913163001011.png"></p>
]]></content>
      <categories>
        <category>编译原理</category>
      </categories>
      <tags>
        <tag>编译原理</tag>
        <tag>有穷自动机</tag>
      </tags>
  </entry>
  <entry>
    <title>计组：概论</title>
    <url>/2021/09/06/ComputerCompositionPrinciple01/</url>
    <content><![CDATA[<h2 id="计算机基本组成"><a href="#计算机基本组成" class="headerlink" title="计算机基本组成"></a>计算机基本组成</h2><p><strong>五大组成部分</strong></p>
<p>运算器、控制器、存储器、输入设备、输出设备</p>
<p><strong>硬件组成</strong></p>
<p><img src="/2021/09/06/ComputerCompositionPrinciple01/1631101751247-16311017717611.png"></p>
<p><strong>工作流程：</strong></p>
<p>编写程序-&gt;输入程序-&gt;存储程序-&gt;程序转换为指令序列-&gt;执行指令-&gt;输出结果</p>
<p><strong>计算机内部的两大流：</strong></p>
<p>控制流：控制计算机工作大学习，即指令、微命令</p>
<p>数据流：计算机加工处理的对象，即数据型数据，非数值型数据</p>
<p>（重点：信息的表示；信息的传送及传送中的控制）</p>
<h2 id="存储程序"><a href="#存储程序" class="headerlink" title="存储程序"></a>存储程序</h2><p><strong>计算机存储程序的工作方式：</strong></p>
<ol>
<li>事先编制程序</li>
<li>存储程序</li>
<li>自动连续运行程序</li>
</ol>
<p><strong>冯诺依曼体质</strong></p>
<ol>
<li>采用二进制形式表示数据和指令</li>
<li>采用存储程序方式工作（核心）</li>
<li>由五大部分组成计算机系统的硬件，并规定了这五部分的基本功能</li>
</ol>
<h2 id="数字型计算机的特点"><a href="#数字型计算机的特点" class="headerlink" title="数字型计算机的特点"></a>数字型计算机的特点</h2><ol>
<li>能在程序控制下自动连续工作：PC寄存器</li>
<li>运算速度快</li>
<li>运算精度高</li>
<li>具有很强的信息存储能力</li>
<li>通用性强</li>
</ol>
<h2 id="主要功能部件"><a href="#主要功能部件" class="headerlink" title="主要功能部件"></a>主要功能部件</h2><h3 id="存储器"><a href="#存储器" class="headerlink" title="存储器"></a>存储器</h3><p>功能：存储信息</p>
<p>组成（主存储器）：</p>
<p><img src="/2021/09/06/ComputerCompositionPrinciple01/1631103052208.png"></p>
<p><strong>存储体：</strong>存放信息的实体</p>
<p><strong>寻址系统：</strong>对地址码译码，选择存储单元</p>
<p><strong>读/写线路和数据寄存器：</strong>完成读/写操作，</p>
<p>​                                            暂存读/写数据</p>
<p><strong>控制线路：</strong>产生读/写时序，控制读/写操作</p>
<h3 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h3><p>由<strong>运算器、控制器</strong>组成</p>
<h4 id="运算器："><a href="#运算器：" class="headerlink" title="运算器："></a>运算器：</h4><p><img src="/2021/09/06/ComputerCompositionPrinciple01/1631103737634.png"></p>
<p><strong>ALU：</strong>通过加法器实现运算操作（由<strong>全加器</strong>求和，由<strong>进位链</strong>传递<strong>进位信号</strong>）</p>
<p><strong>通用寄存器组：</strong>提供操作数，存放运算结果</p>
<p><strong>移位器：</strong>直接或者移位送出运算结果</p>
<p><strong>控制器：</strong></p>
<ol>
<li><p>功能：产生控制命令（微命令），控制全机操作</p>
</li>
<li><p>组成：</p>
<p><img src="/2021/09/06/ComputerCompositionPrinciple01/1631104175903.png"></p>
</li>
<li><p>微命令产生方式（指令执行控制方式）:</p>
<ul>
<li>组合逻辑控制方式：由组合逻辑电路产生微命令</li>
<li>微程序控制方式：由微指令产生微命令</li>
</ul>
</li>
</ol>
<h3 id="输入-输出设备"><a href="#输入-输出设备" class="headerlink" title="输入/输出设备"></a>输入/输出设备</h3><ol>
<li><p>功能：转换信息</p>
<p>输入：原始信息-&gt;代码，送入主机 </p>
<p>输出：处理结果-&gt;人所能接受的形式，并输出 （代码）</p>
</li>
</ol>
<h2 id="硬件系统结构"><a href="#硬件系统结构" class="headerlink" title="硬件系统结构"></a>硬件系统结构</h2><h3 id="总线"><a href="#总线" class="headerlink" title="总线"></a>总线</h3><p>能为多个部件分时、共享的一组信息传送线 路及相应的控制逻辑。</p>
<p><img src="/2021/09/06/ComputerCompositionPrinciple01/1631104683808.png"></p>
<p><img src="/2021/09/06/ComputerCompositionPrinciple01/1631104748258.png"></p>
<p><strong>以CPU为中心的双总线结构：</strong></p>
<p><img src="/2021/09/06/ComputerCompositionPrinciple01/1631104791464.png"></p>
<p><strong>单总线结构：</strong></p>
<p><img src="/2021/09/06/ComputerCompositionPrinciple01/1631104831462.png"></p>
<p><strong>以M为中心的双总线结构：</strong></p>
<p><img src="/2021/09/06/ComputerCompositionPrinciple01/1631104873210.png"></p>
<p><strong>多级总线结构：</strong></p>
<p><img src="/2021/09/06/ComputerCompositionPrinciple01/1631104927121.png"></p>
<h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><p>部件与部件（指硬件或软件）之间的交接部分称为接口；</p>
<p>主机系统总线与I/O设备之间的交接部分称为I/O接口。</p>
<p><strong>接口类型</strong></p>
<p>按传送格式： 串行接口、并行接口 </p>
<p>按时序控制： 同步接口、异步接口 </p>
<p>按信息传送控制方式：<strong>中断接口</strong>、DMA接口</p>
<h2 id="计算机性能的性能指标"><a href="#计算机性能的性能指标" class="headerlink" title="计算机性能的性能指标"></a>计算机性能的性能指标</h2><h3 id="基本字长"><a href="#基本字长" class="headerlink" title="基本字长"></a>基本字长</h3><p>一般指参加<strong>一次定点运算的操作数的位数</strong></p>
<p>8、16、32、64位</p>
<h3 id="运算速度"><a href="#运算速度" class="headerlink" title="运算速度"></a>运算速度</h3><p><strong>CPU主频</strong></p>
<p>计算机的振荡器输出的脉冲序列的频率，是计算机中一切操作所依据的时间基准信号，其高低决定了计算机工做速度的快慢。</p>
<p><strong>时钟频率</strong></p>
<p>是主频脉冲经分频后所形成的时钟脉冲序列的频率，两个相邻时钟脉冲之间的间隔时间是一个<strong>时钟周期</strong>时间，也称为<strong>节拍</strong>。</p>
<h3 id="数据通路宽度与数据传输率"><a href="#数据通路宽度与数据传输率" class="headerlink" title="数据通路宽度与数据传输率"></a>数据通路宽度与数据传输率</h3><p><strong>数据通路宽度</strong></p>
<p> 指数据总线（多条）一次能并行传送的数据位数。</p>
<p><strong>数据传输率</strong></p>
<p>指数据总线每秒传送的数据量，也称为数据总线的带宽。</p>
<p><img src="/2021/09/06/ComputerCompositionPrinciple01/1631106969901.png"></p>
<h3 id="存储容量"><a href="#存储容量" class="headerlink" title="存储容量"></a>存储容量</h3><p><strong>主存容量：</strong></p>
<p>指  存储单元个数（地址位数）×位数（编制单位）</p>
<p>表示为：字数×字长（按字编址，16位） </p>
<p>​                或 字数×字节长（按字节编址，8位）</p>
<p><strong>外存容量：</strong></p>
<p>常表示为字节数。 外存容量与地址码位数无关。</p>
]]></content>
      <categories>
        <category>计算机组成原理</category>
      </categories>
      <tags>
        <tag>计算机组成原理</tag>
      </tags>
  </entry>
  <entry>
    <title>计组：计算机中信息的表示方式（二）</title>
    <url>/2021/09/15/ComputerCompositionPrinciple03/</url>
    <content><![CDATA[<h1 id="指令分类"><a href="#指令分类" class="headerlink" title="指令分类"></a>指令分类</h1><p><img src="/2021/09/15/ComputerCompositionPrinciple03/image-20210915203451432.png"></p>
<ol>
<li><p>按指令格式分类</p>
<p>双操作数指令，单操作数指令，程序转移指令</p>
</li>
<li><p>按操作数寻址方式分类</p>
<p><img src="/2021/09/15/ComputerCompositionPrinciple03/image-20210915203637196.png"></p>
</li>
<li><p>按指令功能分类</p>
<p><strong>传送指令，输入/输出（I/O）指令</strong>，算数逻辑指令，程序控制指令，处理机控制类指令</p>
</li>
</ol>
<h2 id="一般传送指令"><a href="#一般传送指令" class="headerlink" title="一般传送指令"></a>一般传送指令</h2><p>计算机中<strong>最基本的指令</strong>，包括：</p>
<p>算术逻辑运算、输入输出操作···</p>
<p>单纯的传送指令将数据从一个地方（源地址）传送到另一个地方（目的地址）</p>
<p><strong>传送范围</strong>：</p>
<p>即指令允许数据在什么范围内传送。</p>
<p>操作数来源与目的地主要是：<strong>CPU寄存器、主存储器</strong></p>
<p><img src="/2021/09/15/ComputerCompositionPrinciple03/image-20210915204839560.png"></p>
<p><img src="/2021/09/15/ComputerCompositionPrinciple03/image-20210915204851811.png"></p>
<p><strong>传送单位</strong></p>
<p><strong>设置寻址方式</strong></p>
<h2 id="输入输出（I-O）指令"><a href="#输入输出（I-O）指令" class="headerlink" title="输入输出（I/O）指令"></a>输入输出（I/O）指令</h2><p>从广义的角度来看，<strong>I/O指令也是一种传送指令</strong></p>
<p>主机对外围设备的访问一般就是对有关接口寄存器的访问</p>
<p><img src="/2021/09/15/ComputerCompositionPrinciple03/image-20210915205114711.png"></p>
<h3 id="外围设备编址"><a href="#外围设备编址" class="headerlink" title="外围设备编址"></a><strong>外围设备编址</strong></h3><p><img src="/2021/09/15/ComputerCompositionPrinciple03/image-20210915205412470.png"></p>
<h4 id="单独编址"><a href="#单独编址" class="headerlink" title="单独编址"></a>单独编址</h4><ol>
<li><strong>单独编址到设备级：</strong></li>
</ol>
<p><img src="/2021/09/15/ComputerCompositionPrinciple03/image-20210915205549385.png"></p>
<ol start="2">
<li><strong>单独编制到寄存器级：</strong></li>
</ol>
<p><img src="/2021/09/15/ComputerCompositionPrinciple03/image-20210915205825524.png"></p>
<p><img src="/2021/09/15/ComputerCompositionPrinciple03/image-20210915211441454.png"></p>
<h4 id="统一编址"><a href="#统一编址" class="headerlink" title="统一编址"></a>统一编址</h4><p><img src="/2021/09/15/ComputerCompositionPrinciple03/image-20210915212129447.png"></p>
<h4 id="单独编制和统一编址比较"><a href="#单独编制和统一编址比较" class="headerlink" title="单独编制和统一编址比较"></a>单独编制和统一编址比较</h4><p><img src="/2021/09/15/ComputerCompositionPrinciple03/image-20210915212200991.png"></p>
<h3 id="I-O指令的设置方法"><a href="#I-O指令的设置方法" class="headerlink" title="I/O指令的设置方法"></a>I/O指令的设置方法</h3><p><img src="/2021/09/15/ComputerCompositionPrinciple03/image-20210915213415716.png"></p>
]]></content>
  </entry>
  <entry>
    <title>模型机的总体设计</title>
    <url>/2021/09/17/ComputerCompositionPrinciple04/</url>
    <content><![CDATA[<h1 id="模型机的总体设计"><a href="#模型机的总体设计" class="headerlink" title="模型机的总体设计"></a>模型机的总体设计</h1><p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917083753129.png"></p>
<h2 id="指令格式"><a href="#指令格式" class="headerlink" title="指令格式"></a>指令格式</h2><p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917084042617.png"></p>
<p><strong>1. 双操作数指令</strong></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917084103503.png" alt="image-20210917084103503"></p>
<ol start="2">
<li><strong>单操作数指令</strong></li>
</ol>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917084130138.png"></p>
<ol start="3">
<li><p><strong>转移指令</strong></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917084154667.png"></p>
</li>
</ol>
<h2 id="寻址方式"><a href="#寻址方式" class="headerlink" title="寻址方式"></a>寻址方式</h2><p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917084308367.png"></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917084320473.png"></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917085432918.png"></p>
<h2 id="操作类型"><a href="#操作类型" class="headerlink" title="操作类型"></a>操作类型</h2><p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917085558828.png"></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917085826008.png"></p>
<h2 id="CPU组成"><a href="#CPU组成" class="headerlink" title="CPU组成"></a>CPU组成</h2><p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917085910304.png"></p>
<h3 id="运算器"><a href="#运算器" class="headerlink" title="运算器"></a>运算器</h3><p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917090154698.png"></p>
<ol>
<li><p>输入选择器/锁存器</p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917090456194.png"></p>
</li>
<li><p>ALU部件</p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917090739124.png"></p>
</li>
<li><p>移位器</p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917090752014.png"></p>
</li>
</ol>
<h3 id="寄存器"><a href="#寄存器" class="headerlink" title="寄存器"></a>寄存器</h3><p><strong>寄存器设置</strong></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917092527017.png"></p>
<h4 id="用于处理的寄存器"><a href="#用于处理的寄存器" class="headerlink" title="用于处理的寄存器"></a>用于处理的寄存器</h4><p><strong>通用寄存器组</strong></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917093326618.png"></p>
<p><strong>暂存器</strong></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917093437800.png" alt="image-20210917093437800"></p>
<h4 id="用于控制的寄存器"><a href="#用于控制的寄存器" class="headerlink" title="用于控制的寄存器"></a>用于控制的寄存器</h4><p><strong>指令寄存器IR（Instruction Register）</strong></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917093942508.png"></p>
<p><strong>程序计数器PC（Program Counter）</strong></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917094305279.png"></p>
<p><strong>程序状态字寄存器PSW（Program Status Word)</strong></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917094359904.png"></p>
<h4 id="用作主存接口的寄存器"><a href="#用作主存接口的寄存器" class="headerlink" title="用作主存接口的寄存器"></a>用作主存接口的寄存器</h4><p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917094946788.png"></p>
<p><strong>地址寄存器MAR: Memory Address Register</strong></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917095141560.png"></p>
<p><strong>数据缓冲寄存器MBR/MDR：Memory Buffer/Data Register</strong></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917100027716.png"></p>
<h3 id="总线"><a href="#总线" class="headerlink" title="总线"></a>总线</h3><p>1.定义</p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917100423495.png"></p>
<ol start="2">
<li><p>总线类型</p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210917100543723.png"></p>
</li>
</ol>
<p> <strong>CPU内总线：</strong></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918084656831.png"></p>
<p><strong>部件间总线：</strong></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918084848134.png"></p>
<p><strong>系统总线：</strong></p>
<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918084905049.png" style="zoom:67%;">



<p><strong>外总线：</strong></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918084919443.png"></p>
<h3 id="时序系统"><a href="#时序系统" class="headerlink" title="时序系统"></a>时序系统</h3><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918085259855.png" style="zoom:67%;">



<h3 id="CPU的内部数据通路结构"><a href="#CPU的内部数据通路结构" class="headerlink" title="CPU的内部数据通路结构"></a>CPU的内部数据通路结构</h3><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918085557420.png" style="zoom:67%;">



<p><strong>1. 模型机数据通路框图</strong></p>
<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918085634763.png" style="zoom:67%;">

<p><strong>2. 各类信息的传送路径</strong></p>
<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918085746835.png" style="zoom:67%;">



<p>取指令地址</p>
<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918092219691.png" style="zoom:67%;">

<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918090243201.png" style="zoom:50%;">



<p>指令信息的传递</p>
<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918091244655.png" style="zoom:50%;">



<p>取操作数地址（寄存器间址）</p>
<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918092728565.png" style="zoom:67%;">



<p>取操作数地址（自减型寄存器间址）</p>
<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918092837970.png" alt="image-20210918092837970" style="zoom:67%;">



<p>取操作数地址（自增型寄存器间址）</p>
<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918093042362.png" style="zoom:67%;">

<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918093051599.png"></p>
<p><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918093059929.png"></p>
<p>取操作数地址（变址器间址）</p>
<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918093735006.png" style="zoom:67%;">

<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918093752452.png" alt="image-20210918093752452" style="zoom:67%;">

<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918093802571.png" style="zoom:67%;">



<p><strong>4. 数据信息的传送</strong></p>
<p>寄存器-&gt;寄存器</p>
<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918094030278.png" style="zoom:67%;">



<p>寄存器-&gt;主存</p>
<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918094212532.png" style="zoom:67%;">



<p>主存-&gt;寄存器</p>
<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918094235606.png" style="zoom:67%;">



<p>主存-&gt;主存</p>
<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918094316110.png" style="zoom:67%;">



<p>寄存器-&gt;外围设备</p>
<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918094608972.png" style="zoom:67%;">



<p>外围设备-&gt;寄存器</p>
<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918094836188.png" style="zoom:67%;">





<h3 id="微命令设置"><a href="#微命令设置" class="headerlink" title="微命令设置"></a>微命令设置</h3><p>将模型机的数据传送路径分为<strong>两大类操作</strong>，并分段设置相关微命令：</p>
<h4 id="数据通路操作：CPU内部操作"><a href="#数据通路操作：CPU内部操作" class="headerlink" title="数据通路操作：CPU内部操作"></a>数据通路操作：CPU内部操作</h4><img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918095508673.png" style="zoom:67%;">



<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918095602805.png" style="zoom: 67%;">



<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918095949584.png" style="zoom:50%;">

<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918100143665.png" style="zoom:50%;">



<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918100202131.png" style="zoom:50%;">

<img src="/2021/09/17/ComputerCompositionPrinciple04/image-20210918100326456.png" style="zoom:50%;">

]]></content>
  </entry>
  <entry>
    <title>计组：计算机中信息的表示方式（一）</title>
    <url>/2021/09/08/ComputerCompositionPrinciple02/</url>
    <content><![CDATA[<p><strong>计算机中信息的表示方式</strong></p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/1631108317881.png"></p>
<p><strong>指令的执行：</strong></p>
<ol>
<li>取指：从主存储器中取指令；</li>
<li>执行指令：在CPU内部执行该条指令（在此过程中， CPU一般还需从主存储器中获取如操作数等相关的信 息）；</li>
<li>存结果：结果送回存储器存放。</li>
</ol>
<p><strong>指令：</strong>一系列按照某种规律有序排列的，能被CPU 识别、并执行的二进制代码</p>
<p><strong>指令系统（或集）：</strong>一台计算机所能执行的全部指令。</p>
<h2 id="指令格式"><a href="#指令格式" class="headerlink" title="指令格式"></a>指令格式</h2><p>一条指令最多提供两方面的信息：</p>
<p>操作码（OP）：与CPU操作有关的信息</p>
<p>地址码（AD）：与操作数有关的信息</p>
<p><strong>基本格式</strong></p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/1631108657173.png"></p>
<h2 id="指令字长"><a href="#指令字长" class="headerlink" title="指令字长"></a>指令字长</h2><p>指令字长越长：</p>
<p>​    优点：功能丰富，完成工作多</p>
<p>​    缺点：占用空间大，取指时间长，执行速度慢</p>
<p><strong>操作码的位数决定了操作类型的多少</strong></p>
<p><strong>操作码分类：</strong></p>
<p>定长操作码：</p>
<p>指令长度比较长时，位置、位数固定，位置在指令 的前几位。</p>
<p>扩展操作码：</p>
<p>指令长度比较短时，位置、位数不固定，用扩展标 志表示。</p>
<p>方式码：</p>
<p>操作码分为几部分，每部分表示一种操作。</p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/1631109347792.png"></p>
<h2 id="地址结构"><a href="#地址结构" class="headerlink" title="地址结构"></a>地址结构</h2><p>在指令中明确给出几个地址，给出哪些地址</p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/1631235309933.png"></p>
<p><strong>指令给出操作数地址的方式：</strong></p>
<p>显式：直接、间接、变址、基址等</p>
<p>隐式：隐含约定寄存器号、主存储器单元号</p>
<p><strong>显地址：</strong></p>
<p>指令明显给出地址</p>
<p>如：写明主存储单元号 或CPU的寄存器编号,则这种地址表达称为显地址。</p>
<p><strong>显地址分为：</strong> 三地址指令、二地址指令、 一地址指令、零地址指令</p>
<p><strong>隐地址：</strong></p>
<p>指令中的地址是以隐含的方式约定</p>
<p>如：系统事先隐含约定操作数在CPU某个寄存器中,或是在堆栈 中,因此在指令中并不给出地址码,这种隐含约定的地址就称为隐地址。</p>
<p><strong>简化地址结构的基本途径：尽量使用隐地址。</strong></p>
<p><strong>（1）四地址指令</strong></p>
<p><strong><img src="/2021/09/08/ComputerCompositionPrinciple02/1631236505556.png"></strong></p>
<p><strong>（2）三地址指令</strong></p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/1631237535653.png"></p>
<p><strong>（3）二地址指令</strong></p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/1631237595648.png"></p>
<p><strong>（4）单地址指令</strong></p>
<p><strong>a. 隐含约定的目的地的双操作数指令</strong></p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/1631237677942.png"></p>
<img src="/2021/09/08/ComputerCompositionPrinciple02/1631238035214-16312380540271.png" style="zoom:50%;">



<p><strong>b.只有目的操作数的单操作数指令</strong></p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/1631238181946.png"></p>
<p><strong>（5）零地址指令</strong></p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/1631238421642.png"></p>
<p><strong>a.对只有目的操作数的指令，隐含在指定寄存器内 进行操作。</strong></p>
<p>PUSHF ；FLAGS→入栈 </p>
<p>POPF ；FLAGS→出栈 </p>
<p>LAHF ；FLAGS的低8位→AH </p>
<p>SAHF ；AH→FLAGS的低8位</p>
<p>···</p>
<p><strong>b.不需要操作数的指令。</strong></p>
<p>NOP ；空操作指令</p>
<p>HLT ；停机指令</p>
<p>···</p>
<p><strong>c.对堆栈栈顶单元内容进行操作,如指令PUSH (压 入堆栈)、POP (弹出堆栈)</strong></p>
<h2 id="寻址方式"><a href="#寻址方式" class="headerlink" title="寻址方式"></a>寻址方式</h2><p><img src="/2021/09/08/ComputerCompositionPrinciple02/1631239226346.png"></p>
<p>① CPU能够直接访问的操作数只能存放在主存储器 （包括CACHE、接口中的R）或CPU内的寄存器中； </p>
<p>② 由于主存储器的容量远远大于CPU内的寄存器的 容量，因此CPU能够直接访问的操作数主要存放在主 存储器中。</p>
<p><strong>存放方式（大致过程）：</strong></p>
<p>程序-&gt;CS段</p>
<p>数据-&gt;DS段</p>
<p>结果-&gt;ES段</p>
<p>下条地址-&gt;SS段</p>
<p><strong>四大寻址方式</strong></p>
<ol>
<li><p><strong>立即寻址：（掌握）</strong></p>
<p>操作码字段后面你的部分不是操作码地址，而是操作数本身。在读取指令时也就从指令之中获得了操作数，即操 作数包含在指令中。</p>
<img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210913085811043.png" style="zoom:50%;"></li>
<li><p><strong>直接寻址类：（掌握）</strong></p>
<p>直接给出主存地址（主存直接寻址）或寄存器（寄存器直接寻址）编号，从主存单元内或 CPU的寄存器内读取操作数。</p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210913085532650.png"></p>
<img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210913090007021.png" style="zoom:67%;">

<p><strong>比较：</strong></p>
<p>a. 直接寻址是访问一次主存才能读取所需操作数；寄 存器寻址是从CPU的寄存器中读取操作数，不需访问主存，所需时间大约是从主存中读数时间的几分之一到 几十分之一 ，因而寄存器寻址比直接寻址快得多。</p>
<p>b.由于寄存器数远少于主存储器的单元数，所以指令 中存放寄存器号的字段位数也就大大少于存放主存地 址码所需位数。采用寄存器寻址方式或其它以寄存器 为基础的寻址方式（例如寄存器寻址、寄存器间址方 式），可以大大减少指令中一个地址的位数，从而有 效地缩短指令长度。这也使读取指令的时间减少，提 高了工作速度。</p>
<p><strong>注意：</strong></p>
<p>减少指令中地址数目与减少一个地址的位数是 两个不同的概念。 </p>
<p>采用隐地址可以减少指令中地址的数目； </p>
<p>采用寄存器寻址方式、寄存器间址方式等可以使指令中为给出一个地址所需的位数减少。 其实，均减少了指令长度。</p>
</li>
<li><p><strong>间接寻址类：（掌握）</strong></p>
<p>先从某寄存器/主存中读取地址，再按这个地址访问 主存以读取操作数。</p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210913092428125.png"></p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210913094228659.png"></p>
<p><strong>自增型寄存器间址方式</strong></p>
<p>寄存器间址的一种变型,若指令中给出存放操作数地址 的寄存器号,从寄存器中读出操作数地址后,寄存器内容加1，这种寻址方式称为自增型寄存器间接寻址。</p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210913095016132.png"></p>
<p><strong>自减型寄存器间址型</strong></p>
<p>若指令中给出寄存器号，被指定的寄存器内容减1后 作为操作数地址，按照该地址访问主存储器，相应的主 存单元内容为操作数，自减型寄存器间址方式常用助记 符 -（R）表示。</p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210913095243802.png"></p>
<p><strong>堆栈寻址</strong></p>
<p>堆栈寻址方式是指操作数在堆栈中，指令隐含约定由堆 栈指针SP寄存器提供栈顶单元地址（SP也可以编码形式 出现在指令中），进行读出或写入的一种寻址方式。 根据压入数据时栈顶单元的地址是减小还是增大或不变, 可以将堆栈的工作方式大致分为向上生成方式、向下生 成方式和栈顶固定方式三种。</p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210913100304932.png"></p>
</li>
</ol>
<p><strong>多重间接寻址</strong></p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210915202759509.png"></p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210915202812521.png"></p>
<p>例：</p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210915202828392.png"></p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210915202904166.png"></p>
<ol start="4">
<li><strong>变址类</strong></li>
</ol>
<p><strong>变址寻址</strong>（掌握）</p>
<p>SI:source index</p>
<p>DI:destination index</p>
<p>BX:base </p>
<p>BP:base pointer</p>
<p>在8086/8088中使用SI,DI</p>
<p>指令给出的是形式地址（不是最终地址），经过某种变换（例如相加、相减、高低位地址拼接等），才获得有效地址，据此访问主存储器以读取操作数。变址方式常用助记符**X(R)**表示</p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210915200045895.png"></p>
<p>例:</p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210915200155551.png"></p>
<p><strong>基址寻址</strong></p>
<p>区别：寄存器不一样</p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210915200329184.png"></p>
<p><strong>变址、基址寻址区别</strong></p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210915200841131.png"></p>
<p><strong>基址加变址方式</strong></p>
<p><img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210915201014412.png"></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p><img src="/2021/09/08/ComputerCompositionPrinciple02/image-20210915202424469.png"></p>
]]></content>
      <categories>
        <category>计算机组成原理</category>
      </categories>
      <tags>
        <tag>计算机组成原理</tag>
      </tags>
  </entry>
  <entry>
    <title>成电微记（二）-需求分析</title>
    <url>/2021/09/09/DiaryInUESTC02/</url>
    <content><![CDATA[<h2 id="记账"><a href="#记账" class="headerlink" title="记账"></a>记账</h2><p><strong><a href>@陈曦</a>   <a href>@吴欣璇</a>  <a href>@周哲贤</a></strong></p>
<h3 id="收款"><a href="#收款" class="headerlink" title="收款"></a>收款</h3><ol>
<li><p>收款分类</p>
<ul>
<li>奖学金</li>
<li>零花钱</li>
<li>兼职</li>
<li>···</li>
</ul>
</li>
<li><p>接收收款的金额</p>
<ul>
<li>语音输入</li>
<li>文字输入</li>
<li>UI输入</li>
</ul>
</li>
<li><p>记录收款时间</p>
<ul>
<li>更改时间</li>
<li>自动读取系统时间</li>
</ul>
</li>
</ol>
<h3 id="付款"><a href="#付款" class="headerlink" title="付款"></a>付款</h3><ol>
<li><p>付款分类</p>
<ul>
<li>外卖</li>
<li>学习</li>
<li>娱乐</li>
<li>衣物</li>
<li>日用品</li>
<li>···</li>
</ul>
</li>
<li><p>接收付款的金额</p>
<ul>
<li>语音输入</li>
<li>文字输入</li>
<li>UI输入</li>
</ul>
</li>
<li><p>记录付款时间</p>
<ul>
<li>更改时间</li>
<li>自动读取系统时间</li>
</ul>
</li>
</ol>
<h3 id="预算"><a href="#预算" class="headerlink" title="预算"></a>预算</h3><ol>
<li>编辑预算<ul>
<li>分类</li>
</ul>
</li>
<li>计算预算的完成程度</li>
</ol>
<h3 id="汇总"><a href="#汇总" class="headerlink" title="汇总"></a>汇总</h3><ol>
<li>收款、付款、预算的增删改查</li>
<li>生成消费记录周、月报<ul>
<li>雷达图、圆饼图、柱状图···</li>
<li>日均消费</li>
<li>各个分类的消费情况</li>
</ul>
</li>
</ol>
<h3 id="优先级："><a href="#优先级：" class="headerlink" title="优先级："></a>优先级：</h3><p>收款=付款&gt;汇总&gt;预算</p>
<h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><p><strong><a href>@陈曦</a></strong></p>
<h3 id="记录待办事项"><a href="#记录待办事项" class="headerlink" title="记录待办事项"></a>记录待办事项</h3><ol>
<li>打字输入</li>
<li>语音输入</li>
</ol>
<h3 id="对代办事项进行管理"><a href="#对代办事项进行管理" class="headerlink" title="对代办事项进行管理"></a>对代办事项进行管理</h3><ol>
<li>基本的增删改</li>
</ol>
<h3 id="整理事项完成情况"><a href="#整理事项完成情况" class="headerlink" title="整理事项完成情况"></a>整理事项完成情况</h3><ol>
<li>显示完成情况图（柱状图、雷达图···）</li>
</ol>
<h3 id="ddl提示"><a href="#ddl提示" class="headerlink" title="ddl提示"></a>ddl提示</h3><ol>
<li>通知栏显示未完成事项</li>
</ol>
<h3 id="桌面模块"><a href="#桌面模块" class="headerlink" title="桌面模块"></a>桌面模块</h3><ol>
<li>在桌面以模块的形式显示todo列表</li>
</ol>
<h3 id="优先级：-1"><a href="#优先级：-1" class="headerlink" title="优先级："></a>优先级：</h3><p>记录待办事项&gt;管理待办事项&gt;整理完成情况&gt;ddl提示</p>
<h2 id="日记模块"><a href="#日记模块" class="headerlink" title="日记模块"></a>日记模块</h2><p><strong><a href>@周哲贤</a></strong></p>
<h3 id="基本需求："><a href="#基本需求：" class="headerlink" title="基本需求："></a>基本需求：</h3><ul>
<li>用户创建新日记</li>
<li>用户编辑日记</li>
<li>储存日记数据</li>
</ul>
<h3 id="进阶需求："><a href="#进阶需求：" class="headerlink" title="进阶需求："></a>进阶需求：</h3><ul>
<li>多种输入方式，多媒体（语音输入）</li>
<li>导出图片，pdf功能</li>
<li>历史日记展示</li>
</ul>
<h4 id="可实现ideas"><a href="#可实现ideas" class="headerlink" title="可实现ideas:"></a>可实现ideas:</h4><ul>
<li>创建时以随机颜色由加号点击后扩散到整个屏幕</li>
<li>切换颜色时可用圆形调色板或随机切换也是扩散方式加载</li>
<li>使用美工边框主题</li>
<li>增加去年今天故事回顾</li>
<li>每个日记添加心情、当天天气、写日记的时间</li>
<li>云同步（可以忽略）</li>
<li>随机调取一年中的回忆，生成照片或视频)</li>
</ul>
<h2 id="我的信息"><a href="#我的信息" class="headerlink" title="我的信息"></a>我的信息</h2><p><strong><a href>@吴欣璇</a></strong></p>
<h3 id="个人信息"><a href="#个人信息" class="headerlink" title="个人信息"></a>个人信息</h3><ol>
<li><p>登录功能</p>
<ul>
<li>验证密码</li>
<li>验证账号格式（邮箱）</li>
</ul>
</li>
<li><p>注册账号</p>
<p>手机/邮箱验证</p>
</li>
<li><p>新账号密码设置</p>
<ul>
<li>验证密码安全性</li>
</ul>
</li>
<li><p>个性化设置</p>
<ul>
<li>设置用户名称</li>
</ul>
</li>
</ol>
<ul>
<li>设置用户头像<ul>
<li>编辑用户个性签名</li>
<li>个性化主题、文字样式</li>
</ul>
</li>
</ul>
<ol start="5">
<li>查看注册时间</li>
</ol>
<h3 id="设置功能"><a href="#设置功能" class="headerlink" title="设置功能"></a>设置功能</h3><ol>
<li><p>待办事项截止提醒。</p>
</li>
<li><p>设定软件音量等。</p>
</li>
<li><p>开发者互动沟通功能。</p>
</li>
<li><p>查看隐私权政策。</p>
</li>
</ol>
<h3 id="优先级：-2"><a href="#优先级：-2" class="headerlink" title="优先级："></a>优先级：</h3><p>设置功能&gt;个人信息</p>
]]></content>
      <categories>
        <category>成电微记</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>成电微记（一）-软件过程模型的选择</title>
    <url>/2021/09/06/DiaryInUESTC01/</url>
    <content><![CDATA[<p>在选择合适的软件过程模型之前，我们先了解几种常用的模型</p>
<h2 id="瀑布模型"><a href="#瀑布模型" class="headerlink" title="瀑布模型"></a>瀑布模型</h2><p>转载自：<a href="https://www.cnblogs.com/jojop/p/11801241.html">周二鸭</a></p>
<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>瀑布模型（经典生命模型）提出了软件开发的系统化的、顺序的方法。其流程从用户需求规格说明开始，通过策划、建模、构建和部署过程，最终提供一个完整的软件并提供持续的技术支持。</p>
<p><strong>模型特点</strong></p>
<ul>
<li>必须等前一阶段的工作完成之后，才能开始后一段的工作；</li>
<li>每一阶段都必须完成规定的文档，没有交出合格的文档就是没有完成该阶段的任务。</li>
<li>前一阶段的输出文档就是后一阶段的输入文档，因此，只有前一阶段的输出文档正确，后一阶段的工作才能得到正确的结果。</li>
<li>每个阶段结束前都要对所完成的文档进行评审，以便及早发现问题，改正错误。事实上越是早期阶段犯下的错误，暴露出来的时间就越晚，排除故障改正错误所需付出的代价也越高。因此，及时审查，是保证软件质量，降低软件成本的重要措施。</li>
</ul>
<p><strong>模型优点</strong>：</p>
<ul>
<li>强调了开发的阶段性，各阶段具有顺序性和依赖性</li>
<li>强调早期调研和需求分析，推迟编码实现的观点</li>
<li>提供了一个模板，这个模板使得分析、设计、编码、测试和支持的方法可以在该模板下有一个共同的指导。</li>
</ul>
<p><strong>模型局限</strong>：</p>
<ul>
<li>瀑布模型是一种线性模型，要求项目严格按规程推进，必须等到所有开发工作全部完成以后才能获得可以交付的软件产品。不能对软件系统进行快速创建，对于一些急于交付的软件系统的开发很不方便。</li>
<li>瀑布模型适合于需求明确，且无大的需求变更的软件开发（编译系统、操作系统等）。而对于分析初期需求模糊的项目，瀑布模型也并不适合。</li>
</ul>
<p><strong>适用场景</strong>：</p>
<p>适用于需求确定，无大的需求变更，工作能够采用线性的方式完成的软件。</p>
<hr>
<p>而在这个项目中我们使用的是基于瀑布模型之上的<strong>增量模型</strong></p>
<h2 id="增量模型"><a href="#增量模型" class="headerlink" title="增量模型"></a>增量模型</h2><h3 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h3><p>增量模型融合了瀑布模型的基本成分和原型实现的迭代特征，它对软件过程的考虑是：在整体上按照瀑布模型的流程实施项目开发，以方便对项目的管理；但在软件的实际开发中，则将软件系统按功能分解为许多增减构件，并以构件为单位逐个地创建与交付，直到全部增量构件创建完成，并都被集成到系统之中交付用户使用。</p>
<p><strong>各阶段任务：</strong></p>
<ol>
<li>对整个系统进行需求分析和概要设计，确定系统基于增量构建的开发，以需求中构建的组成和关系为依据，完成对软件系统的体系结构设计。</li>
<li>进行增量构建的开发。对构建进行需求精细化，然后设计、编码、测试和有效性验证</li>
<li>将构建集成到系统，并对已经改变的系统进行有效性验证，继续下一个增量构建的开发</li>
</ol>
<p><strong>模型特点：</strong></p>
<ol>
<li>将软件系统模块化，分批地提交软件产品，用户可以及时了解软件项目的进展</li>
<li>降低了软件开发的风险，一个开发周期内的错误不会影响整个系统</li>
<li>开发顺序灵活。开发人员可以对组件的实现顺序进行优先级排序，先完成需求稳定的核心组件。当组件的优先级发生变化时，还能及时地对实现顺序进行调整。</li>
</ol>
<p><strong>适用场景：</strong></p>
<p>1、软件产品可以分批次地进行交付。</p>
<p>2、待开发的软件系统能够被模块化。</p>
<p>3、软件开发人员对应用领域不熟悉，难以一次性地进行系统开发。</p>
<p>4、项目管理人员把握全局的水平较高</p>
<hr>
<p>参考：<a href="https://baike.baidu.com/item/%E5%A2%9E%E9%87%8F%E6%A8%A1%E5%9E%8B/686083?fr=aladdin">增量模型</a></p>
<p>其他软件过程模型介绍：<a href="https://www.cnblogs.com/jojop/p/11801241.html">周二鸭</a></p>
]]></content>
      <categories>
        <category>成电微记</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>成电微记（三）-创建github仓库</title>
    <url>/2021/09/11/DiaryInUESTC03/</url>
    <content><![CDATA[<h2 id="第一步：配置身份"><a href="#第一步：配置身份" class="headerlink" title="第一步：配置身份"></a>第一步：配置身份</h2><pre><code>gti config --global user.name&quot;Tony&quot;
git config --global user.email&quot;tony@gmail.com&quot;
</code></pre>
<h2 id="第二步：建立代码仓库"><a href="#第二步：建立代码仓库" class="headerlink" title="第二步：建立代码仓库"></a>第二步：建立代码仓库</h2><pre><code>git init
</code></pre>
<h2 id="第三步：提交本地代码"><a href="#第三步：提交本地代码" class="headerlink" title="第三步：提交本地代码"></a>第三步：提交本地代码</h2><p>add 是用于把想要提交的代码先添加进来，而 commit 则是真正地去执行提交操作</p>
<p>添加文件</p>
<pre><code>git add AndroidManifest.xml
</code></pre>
<p>添加文件夹</p>
<pre><code>git add src
</code></pre>
<p>添加全部文件</p>
<pre><code>git add .
</code></pre>
<p>提交</p>
<pre><code>git commit -m &quot;First commit.&quot;
</code></pre>
<p><strong>Tips</strong>：.gitignore文件中的说明忽略那些文件内容</p>
<p>例</p>
<pre><code>bin/
gen/
</code></pre>
<p>表示bin、gen目录下的所有文件全部忽略</p>
<p>查看文件修改情况</p>
<pre><code>git status
</code></pre>
<p>查看修改情况</p>
<pre><code>git diff
git diff 文件相对路径
</code></pre>
<p>撤销文件修改</p>
<pre><code>git checkout 文件相对路径
</code></pre>
<p>撤销文件添加</p>
<pre><code>git reset HEAD 相对路径
</code></pre>
<p>查看提交记录</p>
<pre><code>git log
</code></pre>
<h2 id="第四步：将代码托管到GitHub上"><a href="#第四步：将代码托管到GitHub上" class="headerlink" title="第四步：将代码托管到GitHub上"></a>第四步：将代码托管到GitHub上</h2><p>参考：<a href="https://blog.csdn.net/qq_43768946/article/details/90411154">JT.X</a></p>
<h3 id="配置SSH-Key"><a href="#配置SSH-Key" class="headerlink" title="配置SSH Key"></a>配置SSH Key</h3><pre><code>cd ~/.ssh
ls
或者
ll
//看是否存在 id_rsa 和 id_rsa.pub文件，如果存在，说明已经有SSH Key
</code></pre>
<p>配置SSH Key</p>
<pre><code>ssh-keygen -t rsa -C “这里换上你的邮箱”
</code></pre>
<p>然后一直回车，生成密钥在/Users/.SSH中</p>
<p>在GitHub平台上添加SSH Key</p>
<p>测试通不通</p>
<pre><code>ssh -T git@github.com
</code></pre>
<h3 id="托管"><a href="#托管" class="headerlink" title="托管"></a>托管</h3><p>设置origin master</p>
<pre><code>git remote add origin ssh地址
</code></pre>
<p>将提交内容同步到远程版本库</p>
<pre><code>git add .
git commit -m &quot;First commit.&quot;
git push origin master
</code></pre>
<h2 id="第五步：分支的用法"><a href="#第五步：分支的用法" class="headerlink" title="第五步：分支的用法"></a>第五步：分支的用法</h2><p>在现有代码 的基础上开辟一个分叉口，使得代码可以在主干线和分支线上同时进行开发，且相互之间不 会影响。</p>
<p>建立分支</p>
<pre><code>git branch version1.0
</code></pre>
<p>检查分支</p>
<pre><code>git branch -a
</code></pre>
<p>合并操作</p>
<pre><code>git checkout master
git merge version1.0
</code></pre>
<p>将分支删除</p>
<pre><code>git branch -D version1.0
</code></pre>
<h2 id="第六步：与远程版本库协作"><a href="#第六步：与远程版本库协作" class="headerlink" title="第六步：与远程版本库协作"></a>第六步：与远程版本库协作</h2><p>下载代码</p>
<pre><code>git clone 项目网址
</code></pre>
<p>把本地内容同步到远程版本库</p>
<pre><code>git push origin master
</code></pre>
<p>将远程版本库代码同步到本地</p>
<pre><code>git fetch origin master
</code></pre>
<p>同步的代码不会合并到任何分支上，而是会存放在到一个 origin/master 分支上，这时我们可以通过 diff 命 令来查看远程版本库上到底修改了哪些东西</p>
<pre><code>git diff origin/master
</code></pre>
<p>之后再调用 merge 命令将 origin/master 分支上的修改合并到主分支上即可</p>
<pre><code>git merge origin/master
</code></pre>
<p>而 pull 命令则是相当于将 fetch 和 merge 这两个命令放在一起执行了，它可以从远程版本库上获取最新的代码并且合并到本地，用法如下所示：</p>
<pre><code>git pull origin master
</code></pre>
]]></content>
      <categories>
        <category>成电微记</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>托福学习笔记</title>
    <url>/2021/08/29/TOEFL/</url>
    <content><![CDATA[<h1 id="试卷结构"><a href="#试卷结构" class="headerlink" title="试卷结构"></a>试卷结构</h1><p><img src="/2021/08/29/TOEFL/1.png"></p>
<h1 id="阅读"><a href="#阅读" class="headerlink" title="阅读"></a>阅读</h1><h2 id="阅读训练方法"><a href="#阅读训练方法" class="headerlink" title="阅读训练方法"></a>阅读训练方法</h2><p><img src="/2021/08/29/TOEFL/2.png"></p>
<h2 id="阅读技巧"><a href="#阅读技巧" class="headerlink" title="阅读技巧"></a>阅读技巧</h2><p>抓住句子主干</p>
<p><strong>句子主干三要素：</strong></p>
<ol>
<li>主角是谁</li>
<li>和谁发生关系</li>
<li>关系导致结果</li>
</ol>
<p><strong>段落结构：</strong></p>
<ol>
<li><p>段落主旨：</p>
<p>主旨信号：转折、对比、总结、强调、因果、定义、有问有答、顺序</p>
</li>
<li></li>
</ol>
<h2 id="难句归类"><a href="#难句归类" class="headerlink" title="难句归类"></a>难句归类</h2><p><img src="/2021/08/29/TOEFL/1631192712318.png"></p>
<p><img src="/2021/08/29/TOEFL/1631192780192.png"></p>
<p><img src="/2021/08/29/TOEFL/1631192765470.png"></p>
<p><img src="/2021/08/29/TOEFL/1631192857942.png"></p>
<h2 id="单词积累"><a href="#单词积累" class="headerlink" title="单词积累"></a>单词积累</h2><p><img src="/2021/08/29/TOEFL/3.png"></p>
<p><img src="/2021/08/29/TOEFL/4.png"></p>
<h1 id="听力"><a href="#听力" class="headerlink" title="听力"></a>听力</h1><p>看图片进入状态</p>
<p>背单词不等同于阅读</p>
<h2 id="Lecture"><a href="#Lecture" class="headerlink" title="Lecture"></a>Lecture</h2><p>想象自己要听课而不是在考试</p>
<p>观察说明图例</p>
<p><img src="/2021/08/29/TOEFL/5.png"></p>
<p><img src="/2021/08/29/TOEFL/6.png"></p>
<h2 id="Conversation"><a href="#Conversation" class="headerlink" title="Conversation"></a>Conversation</h2><br>

<p><img src="/2021/08/29/TOEFL/7.png"></p>
<p><img src="/2021/08/29/TOEFL/8.png"></p>
<h2 id="训练计划："><a href="#训练计划：" class="headerlink" title="训练计划："></a>训练计划：</h2><p><img src="/2021/08/29/TOEFL/9.png"></p>
<p><img src="/2021/08/29/TOEFL/10.png"></p>
<p><img src="/2021/08/29/TOEFL/11.png"></p>
<p><img src="/2021/08/29/TOEFL/12.png"></p>
<h2 id="听力笔记要点"><a href="#听力笔记要点" class="headerlink" title="听力笔记要点"></a>听力笔记要点</h2><p><img src="/2021/08/29/TOEFL/13.png"></p>
<p><strong><a href="https://www.scientificamerican.com/podcast/">练习听力网址：https://www.scientificamerican.com/podcast</a></strong></p>
<h1 id="口语"><a href="#口语" class="headerlink" title="口语"></a>口语</h1><h2 id="口语考试安排"><a href="#口语考试安排" class="headerlink" title="口语考试安排"></a>口语考试安排</h2><p><img src="/2021/08/29/TOEFL/14.png"></p>
<h2 id="评分标准"><a href="#评分标准" class="headerlink" title="评分标准"></a>评分标准</h2><p><img src="/2021/08/29/TOEFL/15.png"></p>
<p><img src="/2021/08/29/TOEFL/16.png"></p>
<p><img src="/2021/08/29/TOEFL/17.png"></p>
<h2 id="各部分内容及解题步骤"><a href="#各部分内容及解题步骤" class="headerlink" title="各部分内容及解题步骤"></a>各部分内容及解题步骤</h2><h3 id="Task1"><a href="#Task1" class="headerlink" title="Task1"></a>Task1</h3><h4 id="解题步骤"><a href="#解题步骤" class="headerlink" title="解题步骤"></a>解题步骤</h4><p><img src="/2021/08/29/TOEFL/20.png"></p>
<p><img src="/2021/08/29/TOEFL/22.png"></p>
<p><img src="/2021/08/29/TOEFL/23.png"></p>
<p><img src="/2021/08/29/TOEFL/24.png"></p>
<p><img src="/2021/08/29/TOEFL/25.png"></p>
<h3 id="Task2"><a href="#Task2" class="headerlink" title="Task2"></a>Task2</h3><h4 id="解题步骤-1"><a href="#解题步骤-1" class="headerlink" title="解题步骤"></a>解题步骤</h4><p><img src="/2021/08/29/TOEFL/26.png"></p>
<table>
<thead>
<tr>
<th>Step1</th>
<th>阅读45s</th>
<th>阅读笔记</th>
</tr>
</thead>
<tbody><tr>
<td>step2</td>
<td>听力对话</td>
<td>听力笔记：针对阅读中的主题，对话主导方是支持还是反对，以及支持或反对的理由。</td>
</tr>
<tr>
<td>step3</td>
<td>审题</td>
<td>Task2的提问大都相似。回答时必须抓住对话主导方的立场和相应理由。答题缺少逻辑或者理由缺少细节的会被扣分。</td>
</tr>
<tr>
<td>Step4</td>
<td>30s准备；60s答题</td>
<td>30s准备工作：标出关键词，确认答题结构，整理笔记</td>
</tr>
</tbody></table>
<h4 id="常用句式"><a href="#常用句式" class="headerlink" title="常用句式"></a>常用句式</h4><p><img src="/2021/08/29/TOEFL/32.png"></p>
<h4 id="时间分配"><a href="#时间分配" class="headerlink" title="时间分配"></a>时间分配</h4><p><img src="/2021/08/29/TOEFL/27.png"></p>
<h3 id="Task3"><a href="#Task3" class="headerlink" title="Task3"></a>Task3</h3><h4 id="解题步骤-2"><a href="#解题步骤-2" class="headerlink" title="解题步骤"></a>解题步骤</h4><table>
<thead>
<tr>
<th>Step1</th>
<th>阅读45s</th>
<th>阅读笔记：概括了解学术的原理、现象、概念</th>
</tr>
</thead>
<tbody><tr>
<td>Step2</td>
<td>听力讲座</td>
<td></td>
</tr>
<tr>
<td>Step3</td>
<td>审题</td>
<td>Task3的提问大都相似，要求我们负数讲座中对学术概念的展开讲解。我们在转述时要尽量全面地输出讲座中的例证细节。</td>
</tr>
<tr>
<td>Step4</td>
<td>30s准备；60s答题</td>
<td>30s准备工作：标出关键词，确认答题结构。笔记中几下的关键术语，努力记下发音，不要因为笔记而耽误听。</td>
</tr>
</tbody></table>
<h4 id="常用句式-1"><a href="#常用句式-1" class="headerlink" title="常用句式"></a>常用句式</h4><p><img src="/2021/08/29/TOEFL/33.png"></p>
<h4 id="时间分配-1"><a href="#时间分配-1" class="headerlink" title="时间分配"></a>时间分配</h4><p><img src="/2021/08/29/TOEFL/28.png"></p>
<h3 id="Task4"><a href="#Task4" class="headerlink" title="Task4"></a>Task4</h3><h4 id="解题步骤："><a href="#解题步骤：" class="headerlink" title="解题步骤："></a>解题步骤：</h4><table>
<thead>
<tr>
<th>Step1</th>
<th>听力对话</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>Step2</td>
<td>审题</td>
<td>Task4的提问大都相似。要求归纳听力讲座的概念和展开细节。</td>
</tr>
</tbody></table>
<p><img src="/2021/08/29/TOEFL/29.png"></p>
<h4 id="时间分配-2"><a href="#时间分配-2" class="headerlink" title="时间分配"></a>时间分配</h4><p><img src="/2021/08/29/TOEFL/30.png"></p>
<h2 id="口语训练方法"><a href="#口语训练方法" class="headerlink" title="口语训练方法"></a>口语训练方法</h2><p><img src="/2021/08/29/TOEFL/18.png"></p>
<h3 id="发音练习教程："><a href="#发音练习教程：" class="headerlink" title="发音练习教程："></a>发音练习教程：</h3><p><img src="/2021/08/29/TOEFL/19.png"></p>
<img src="/2021/08/29/TOEFL/31.png" style="zoom: 67%;">

<p><a href="https://space.bilibili.com/631186842?from=search&seid=11633573194715022155">瑞秋教程</a></p>
<p><a href="https://www.bilibili.com/video/BV1Kb41117ud?from=search&seid=14125080769006400819">安迪教程：基础发音-&gt;句子发音</a></p>
<h3 id="训练规划"><a href="#训练规划" class="headerlink" title="训练规划"></a>训练规划</h3><img src="/2021/08/29/TOEFL/34.png" alt="34">

<h3 id="1v5策略："><a href="#1v5策略：" class="headerlink" title="1v5策略："></a>1v5策略：</h3><p>通过核心语料一次解决多个问题，一般在20-30套核心语料</p>
<h1 id="写作"><a href="#写作" class="headerlink" title="写作"></a>写作</h1><p><img src="/2021/08/29/TOEFL/1630844989017.png"></p>
<h2 id="写作布局"><a href="#写作布局" class="headerlink" title="写作布局"></a>写作布局</h2><p><img src="/2021/08/29/TOEFL/1630852103390.png"></p>
<h2 id="机评算法"><a href="#机评算法" class="headerlink" title="机评算法"></a>机评算法</h2><h3 id="第一项-Organization-30-20-约9分"><a href="#第一项-Organization-30-20-约9分" class="headerlink" title="第一项 Organization,30%-20%,约9分"></a>第一项 Organization,30%-20%,约9分</h3><ol>
<li>枣核型结构【1个导入段+2或3个主题段+1个片尾总结段】</li>
<li>是否写3个主体段：因人而异</li>
</ol>
<h3 id="第二项-Development，28-30-，约9分"><a href="#第二项-Development，28-30-，约9分" class="headerlink" title="第二项 Development，28%-30%，约9分"></a>第二项 Development，28%-30%，约9分</h3><ol>
<li>篇首段两要素【背景导入+明确立场】</li>
<li>主体段三个要素【主旨句+论证细节+总结句】</li>
</ol>
<p><strong>建议：偏首背景导入不要单独分成一段，偏首段直接表明立场；</strong></p>
<p><strong>机评通过数据对比和学号定位确定分数段，请按模型写。</strong></p>
<h3 id="第三项-Mechanics，10-，约3分"><a href="#第三项-Mechanics，10-，约3分" class="headerlink" title="第三项 Mechanics，10%，约3分"></a>第三项 Mechanics，10%，约3分</h3><h4 id="最高三大失分项："><a href="#最高三大失分项：" class="headerlink" title="最高三大失分项："></a>最高三大失分项：</h4><ol>
<li>拼写错误</li>
<li>缺少逗号</li>
<li>首字母大写</li>
</ol>
<h3 id="第四项-Usage，7-8-，约2-5分"><a href="#第四项-Usage，7-8-，约2-5分" class="headerlink" title="第四项 Usage，7%-8%，约2.5分"></a>第四项 Usage，7%-8%，约2.5分</h3><h4 id="最高三大失分项：-1"><a href="#最高三大失分项：-1" class="headerlink" title="最高三大失分项："></a>最高三大失分项：</h4><ol>
<li>冠词错误</li>
<li>介词错误</li>
<li>动名混淆</li>
</ol>
<h3 id="第五项Grammer，7-8-，约2-5分"><a href="#第五项Grammer，7-8-，约2-5分" class="headerlink" title="第五项Grammer，7%-8%，约2.5分"></a>第五项Grammer，7%-8%，约2.5分</h3><h4 id="最高三大失分项：-2"><a href="#最高三大失分项：-2" class="headerlink" title="最高三大失分项："></a>最高三大失分项：</h4><ol>
<li>主谓一致</li>
<li>动词时态错误</li>
<li> 无法辨认</li>
</ol>
<h3 id="第六项-Style，3-，约1分"><a href="#第六项-Style，3-，约1分" class="headerlink" title="第六项 Style，3%，约1分"></a>第六项 Style，3%，约1分</h3><h4 id="最高三大失分项：-3"><a href="#最高三大失分项：-3" class="headerlink" title="最高三大失分项："></a>最高三大失分项：</h4><ol>
<li>重复使用一个词</li>
<li>过多被动语态</li>
<li>长句或短句太多</li>
</ol>
<p><strong>建议：避免使用一个词反复超过3次；</strong></p>
<p><strong>避免大于55个词和小于7个词的句子。</strong></p>
<h3 id="提分策略"><a href="#提分策略" class="headerlink" title="提分策略"></a>提分策略</h3><ol>
<li><p><strong>调整了词长词频：</strong>单词越长越生僻，得到点数越高</p>
<p><a href="www.thesaurus.com/browse/synonym">同义词网站：www.thesaurus.com/browse/synonym</a></p>
</li>
<li><p><strong>增加用词搭配权重7%：</strong>两个次的正确搭配显示</p>
<p><a href="https://prowritingaid.com/en/Collocation/Dictionary/?Word=">常用搭配在线词典：https://prowritingaid.com/en/Collocation/Dictionary/?Word=</a></p>
</li>
</ol>
<hr>
<p><a href="https://www.bilibili.com/video/BV1LW411v7Z6">B站原视频：【清北托福备考慕课】考托人手必备！(2020考试改革后新版)</a></p>
]]></content>
      <categories>
        <category>托福</category>
      </categories>
      <tags>
        <tag>托福</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2021/08/27/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo server
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo generate
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo deploy
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>建立博客时遇到的问题</title>
    <url>/2021/08/30/%E5%BB%BA%E7%AB%8B%E5%8D%9A%E5%AE%A2%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h1 id="本地部署时出现：FATAL-Port-4000-has-been-used-Try-other-port-instead"><a href="#本地部署时出现：FATAL-Port-4000-has-been-used-Try-other-port-instead" class="headerlink" title="本地部署时出现：FATAL Port 4000 has been used. Try other port instead."></a>本地部署时出现：FATAL Port 4000 has been used. Try other port instead.</h1><p>解释：提示4000端口出问题</p>
<h3 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h3><p>在主地址下的_config.yml文件中加入以下代码</p>
<pre><code>server:
  port: 4000 #端口值，默认为4000
  compress: true
  header: true
</code></pre>
<br>

<h3 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h3><p>用以下命令启动</p>
<pre><code>hexo server -p 4001
</code></pre>
<hr>
<h1 id="图片无法加载"><a href="#图片无法加载" class="headerlink" title="图片无法加载"></a>图片无法加载</h1><h3 id="第一步：安装插件"><a href="#第一步：安装插件" class="headerlink" title="第一步：安装插件"></a>第一步：安装插件</h3><pre><code>    npm install hexo-asset-image --save
</code></pre>
<h3 id="第二步：修改文件内容"><a href="#第二步：修改文件内容" class="headerlink" title="第二步：修改文件内容"></a>第二步：修改文件内容</h3><p>在根目录下的_config.yml中加入：（新建文章时自动生成同名文件夹）</p>
<pre><code>post_asset_folder: true
</code></pre>
<h3 id="第三步：打开根目录下的"><a href="#第三步：打开根目录下的" class="headerlink" title="第三步：打开根目录下的"></a>第三步：打开根目录下的</h3><pre><code>/node_modules/hexo-asset-image/index.js
</code></pre>
<p>将内容修改为</p>
<pre><code>&#39;use strict&#39;;
var cheerio = require(&#39;cheerio&#39;);

// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string
function getPosition(str, m, i) &#123;
  return str.split(m, i).join(m).length;
&#125;

var version = String(hexo.version).split(&#39;.&#39;);
hexo.extend.filter.register(&#39;after_post_render&#39;, function(data)&#123;
  var config = hexo.config;
  if(config.post_asset_folder)&#123;
        var link = data.permalink;
    if(version.length &gt; 0 &amp;&amp; Number(version[0]) == 3)
       var beginPos = getPosition(link, &#39;/&#39;, 1) + 1;
    else
       var beginPos = getPosition(link, &#39;/&#39;, 3) + 1;
    // In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.
    var endPos = link.lastIndexOf(&#39;/&#39;) + 1;
    link = link.substring(beginPos, endPos);

    var toprocess = [&#39;excerpt&#39;, &#39;more&#39;, &#39;content&#39;];
    for(var i = 0; i &lt; toprocess.length; i++)&#123;
      var key = toprocess[i];
 
      var $ = cheerio.load(data[key], &#123;
        ignoreWhitespace: false,
        xmlMode: false,
        lowerCaseTags: false,
        decodeEntities: false
      &#125;);

      $(&#39;img&#39;).each(function()&#123;
        if ($(this).attr(&#39;src&#39;))&#123;
            // For windows style path, we replace &#39;\&#39; to &#39;/&#39;.
            var src = $(this).attr(&#39;src&#39;).replace(&#39;\\&#39;, &#39;/&#39;);
            if(!/http[s]*.*|\/\/.*/.test(src) &amp;&amp;
               !/^\s*\//.test(src)) &#123;
              // For &quot;about&quot; page, the first part of &quot;src&quot; can&#39;t be removed.
              // In addition, to support multi-level local directory.
              var linkArray = link.split(&#39;/&#39;).filter(function(elem)&#123;
                return elem != &#39;&#39;;
              &#125;);
              var srcArray = src.split(&#39;/&#39;).filter(function(elem)&#123;
                return elem != &#39;&#39; &amp;&amp; elem != &#39;.&#39;;
              &#125;);
              if(srcArray.length &gt; 1)
                srcArray.shift();
              src = srcArray.join(&#39;/&#39;);
              $(this).attr(&#39;src&#39;, config.root + link + src);
              console.info&amp;&amp;console.info(&quot;update link as:--&gt;&quot;+config.root + link + src);
            &#125;
        &#125;else&#123;
            console.info&amp;&amp;console.info(&quot;no src attr, skipped...&quot;);
            console.info&amp;&amp;console.info($(this));
        &#125;
      &#125;);
      data[key] = $.html();
    &#125;
  &#125;
&#125;);
</code></pre>
<p><a href="https://blog.csdn.net/xjm850552586/article/details/84101345">参考Ericam_</a></p>
<h3 id="第四步："><a href="#第四步：" class="headerlink" title="第四步："></a>第四步：</h3><p><strong>此种方式如有文件夹中存在中文则会<code>url</code>转码,也会显示不正常,解决方法: <code>new </code>文件时使用英文名,手动设置文章标题即可</strong></p>
<p>在.md文件中按markdown语法引用图片：（在text.md中引用在同名文件夹中的</p>
<p>picture.png)</p>
<pre><code>![随便写](text/picture.png)
</code></pre>
<hr>
<h1 id="添加valine评论邮件通知："><a href="#添加valine评论邮件通知：" class="headerlink" title="添加valine评论邮件通知："></a>添加valine评论邮件通知：</h1><p><a href="https://zealot.top/Hexo%E5%8D%9A%E5%AE%A2%E4%B9%8Bvaline%E8%AF%84%E8%AE%BA%E5%AE%9E%E7%8E%B0%E9%82%AE%E7%AE%B1%E6%8F%90%E9%86%92%E7%9A%84%E6%96%B9%E6%B3%95.html">Hexo博客之valine评论实现邮箱提醒的方法</a></p>
<hr>
<h1 id="添加搜索功能"><a href="#添加搜索功能" class="headerlink" title="添加搜索功能"></a>添加搜索功能</h1><h3 id="第一步："><a href="#第一步：" class="headerlink" title="第一步："></a>第一步：</h3><p>安装插件：</p>
<pre><code>npm install hexo-generator-searchdb --save
</code></pre>
<h3 id="第二步："><a href="#第二步：" class="headerlink" title="第二步："></a>第二步：</h3><p>在根目录文件_config.yml文件下添加配置：</p>
<pre><code>search:
  path: search.xml
  field: post
  format: html
  limit: 10000
</code></pre>
<p>在主题目录文件_config.yml文件下配置：</p>
<pre><code>local_search:
  enable: true
</code></pre>
<hr>
]]></content>
      <categories>
        <category>博客</category>
      </categories>
      <tags>
        <tag>博客</tag>
        <tag>问题</tag>
      </tags>
  </entry>
  <entry>
    <title>计组：数字逻辑基础知识（组合逻辑电路）</title>
    <url>/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
    <content><![CDATA[<h1 id="组合逻辑电路"><a href="#组合逻辑电路" class="headerlink" title="组合逻辑电路"></a>组合逻辑电路</h1><h2 id="组合逻辑电路分析"><a href="#组合逻辑电路分析" class="headerlink" title="组合逻辑电路分析"></a>组合逻辑电路分析</h2><h3 id="分类-："><a href="#分类-：" class="headerlink" title="分类 ："></a>分类 ：</h3><ol>
<li><p><strong>组合逻辑电路</strong></p>
<p>任意时刻的输出仅仅取决于该时刻的输入组合，而与输入信号 作用前电路的原状态无关(与过去的输入无关)。</p>
</li>
<li><p><strong>时序逻辑电路</strong></p>
<p>任意时刻的输出不仅仅与该时刻的输入有关，而且还与电路的原状态有关(与过去的输入有关)。</p>
</li>
</ol>
<h3 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h3><ol>
<li>电路由逻辑门构成，无记忆元件</li>
<li>输入信号是单项传输，一般无反馈</li>
</ol>
<h3 id="分析步骤："><a href="#分析步骤：" class="headerlink" title="分析步骤："></a>分析步骤：</h3><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.png" style="zoom: 67%;">

<h4 id="例题："><a href="#例题：" class="headerlink" title="例题："></a>例题：</h4><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/3.png" style="zoom: 67%;">



<h1 id="典型组合逻辑电路介绍"><a href="#典型组合逻辑电路介绍" class="headerlink" title="典型组合逻辑电路介绍"></a>典型组合逻辑电路介绍</h1><h2 id="半加器-Half-Adder-："><a href="#半加器-Half-Adder-：" class="headerlink" title="半加器(Half Adder)："></a>半加器(Half Adder)：</h2><h3 id="概念："><a href="#概念：" class="headerlink" title="概念："></a>概念：</h3><p>半加器电路是指对两个输入<a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E4%BD%8D/3441892">数据位</a>相加，输出一个结果位和<a href="https://baike.baidu.com/item/%E8%BF%9B%E4%BD%8D/5989952">进位</a>，没有进位输入的<a href="https://baike.baidu.com/item/%E5%8A%A0%E6%B3%95%E5%99%A8/9374198">加法器</a>电路。 是实现两个一位二进制数的加法运算电路。</p>
<h3 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h3><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2.png" style="zoom: 67%;">



<h2 id="全加器-Full-Adder-："><a href="#全加器-Full-Adder-：" class="headerlink" title="全加器(Full Adder)："></a>全加器(Full Adder)：</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>全加器英语名称为full-adder，是用<a href="https://baike.baidu.com/item/%E9%97%A8%E7%94%B5%E8%B7%AF/10796427">门电路</a>实现两个二进制数相加并求出和的组合线路，称为一位全加器。一位全加器可以处理低位进位，并输出本位加法进位。多个一位全加器进行级联可以得到多位全加器。</p>
<h3 id="实现原理-1"><a href="#实现原理-1" class="headerlink" title="实现原理"></a>实现原理</h3><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/4.png" style="zoom:67%;">



<h3 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h3><p>通过上学期的离散数学知识，可将下表转换为表达式</p>
<img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/5.png" style="zoom: 80%;">



<img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/6.png">



<p>将表达式转化为组合逻辑电路</p>
<img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/7.png" style="zoom:80%;">



<h2 id="编码器"><a href="#编码器" class="headerlink" title="编码器"></a>编码器</h2><h3 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h3><p>所谓<strong>编码</strong>，就是在选定的一系列二值代码中赋予每个代码以固定 的含义。执行编码功能的电路称<strong>编码器</strong>。</p>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><p><strong>输出：</strong></p>
<ol>
<li>二进制编码器：输入2^n个信号，输出n位编码</li>
<li>二~十进制编码器：10个信号输出，BCD码输出</li>
</ol>
<p><strong>功能：</strong></p>
<ol>
<li>一般编码器 — 输入信号有约束</li>
<li>优先编码器 — 按优先级别高低编码</li>
</ol>
<h3 id="二进制编码器"><a href="#二进制编码器" class="headerlink" title="二进制编码器"></a>二进制编码器</h3><p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/10.png"></p>
<h4 id="例：8线－3线编码器"><a href="#例：8线－3线编码器" class="headerlink" title="例：8线－3线编码器"></a>例：8线－3线编码器</h4><p>有8个输入变量，共256种组合，但只用了8种，即任一时刻允许一位为“0”</p>
<p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/8.png"></p>
<h5 id="真值表"><a href="#真值表" class="headerlink" title="真值表"></a>真值表</h5><p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/9.png"></p>
<h2 id="译码器"><a href="#译码器" class="headerlink" title="译码器"></a>译码器</h2><h3 id="概念-2"><a href="#概念-2" class="headerlink" title="概念"></a>概念</h3><p>译码是编码的逆过程，其功能是将具有特定含义的不同二进制代 码“翻译”出来。</p>
<p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/11.png"></p>
<h3 id="二进制译码器"><a href="#二进制译码器" class="headerlink" title="二进制译码器"></a>二进制译码器</h3><p>二进制译码器属于完全译码器(设译码器有n个输入和m个输出，则m=2 n )，不满足该条件的称为部分译码器。</p>
<p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/12.png"></p>
<h3 id="使能端"><a href="#使能端" class="headerlink" title="使能端"></a>使能端</h3><ol>
<li><p>控制译码器状态：</p>
<p>E=1：译码器处于工作状态</p>
<p>E=2：译码器处于非工作状态</p>
</li>
<li><p>用于译码器扩展</p>
</li>
</ol>
<h4 id="例（控制工作状态）："><a href="#例（控制工作状态）：" class="headerlink" title="例（控制工作状态）："></a>例（控制工作状态）：</h4><p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/13.png"></p>
<h4 id="例（译码器扩展）："><a href="#例（译码器扩展）：" class="headerlink" title="例（译码器扩展）："></a>例（译码器扩展）：</h4><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/14.png" style="zoom:67%;">



<h4 id="3线—8线译码器74LS138-T4138-的引脚图"><a href="#3线—8线译码器74LS138-T4138-的引脚图" class="headerlink" title="3线—8线译码器74LS138(T4138)的引脚图:"></a>3线—8线译码器74LS138(T4138)的引脚图:</h4><p><strong>Ai：输入    Zi：输出    Vcc：电源</strong></p>
<img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/15.png" style="zoom:67%;">



<p><strong>规定：S1=1，S2=S3=0时，使能端E=1</strong></p>
<p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/16.png"></p>
<h1 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h1><h2 id="概念-3"><a href="#概念-3" class="headerlink" title="概念"></a>概念</h2><p>能够存储一位二进制信息的基本单元电路称触发器(Flip-Flop)</p>
<h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ol>
<li><p>具有两个能自我保持的稳定状态：</p>
<p><strong>现态、次态</strong></p>
<p>用来表示逻辑状态的“0”或”1“</p>
</li>
</ol>
<p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1630889807481.png"></p>
<p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1630890041294.png"></p>
<h2 id="R-S触发器"><a href="#R-S触发器" class="headerlink" title="R-S触发器"></a>R-S触发器</h2><h3 id="电路结构"><a href="#电路结构" class="headerlink" title="电路结构"></a>电路结构</h3><p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1630890362795.png"></p>
<h3 id="状态转换表"><a href="#状态转换表" class="headerlink" title="状态转换表"></a>状态转换表</h3><p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1630890402605.png"></p>
<h3 id="特征方程"><a href="#特征方程" class="headerlink" title="特征方程"></a>特征方程</h3><p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1630890477084.png"></p>
<h3 id="RS触发器存在的问题："><a href="#RS触发器存在的问题：" class="headerlink" title="RS触发器存在的问题："></a>RS触发器存在的问题：</h3><p>(1)存在约束条件的限制； </p>
<p>(2)没有时钟信号，无法与其他部件同步工作。</p>
<h2 id="钟控触发器"><a href="#钟控触发器" class="headerlink" title="钟控触发器"></a>钟控触发器</h2><h3 id="钟控RS触发器"><a href="#钟控RS触发器" class="headerlink" title="钟控RS触发器"></a>钟控RS触发器</h3><h4 id="电路结构-1"><a href="#电路结构-1" class="headerlink" title="电路结构"></a>电路结构</h4><p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1630890677853.png"></p>
<h4 id="工作状态"><a href="#工作状态" class="headerlink" title="工作状态"></a>工作状态</h4><p>CP=0时，保持状态不变；CP=1时，接收输入信号。</p>
<h4 id="特征方程-1"><a href="#特征方程-1" class="headerlink" title="特征方程"></a>特征方程</h4><p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1630890858258.png"></p>
<h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><p>加入了时 钟信号，使工作成为可能。</p>
<h4 id="存在的问题："><a href="#存在的问题：" class="headerlink" title="存在的问题："></a>存在的问题：</h4><ol>
<li><p>仍然存在约束问题</p>
</li>
<li><p>在CP=1期间，只要R、S稍有变化，那么Q段也随之变化，存在”空翻问题“。</p>
<p>（“空翻”会造成节拍混乱，使系统工作不可靠，因此在实际的 数字电路中是不允许出现的。）</p>
</li>
</ol>
<h2 id="集成D触发器（掌握）"><a href="#集成D触发器（掌握）" class="headerlink" title="集成D触发器（掌握）"></a>集成D触发器（掌握）</h2><p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1630893188523.png"></p>
<h3 id="特征方程-2"><a href="#特征方程-2" class="headerlink" title="特征方程"></a>特征方程</h3><p>(1) 同步工作时：</p>
<p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1630893231349.png"></p>
<p>(2) 异步工作时</p>
<p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1630893237754.png"></p>
<h3 id="时序图"><a href="#时序图" class="headerlink" title="时序图"></a>时序图</h3><p><img src="/2021/09/01/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1630892713522.png"></p>
]]></content>
      <categories>
        <category>计算机组成原理</category>
      </categories>
      <tags>
        <tag>计算机组成原理</tag>
      </tags>
  </entry>
  <entry>
    <title>计组：数据的表示、运算和校验（数值型数据）</title>
    <url>/2021/08/30/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E8%A1%A8%E7%A4%BA%E3%80%81%E8%BF%90%E7%AE%97%E5%92%8C%E6%A0%A1%E9%AA%8C/</url>
    <content><![CDATA[<h1 id="数值型数据"><a href="#数值型数据" class="headerlink" title="数值型数据"></a>数值型数据</h1><h2 id="不同进制的写法："><a href="#不同进制的写法：" class="headerlink" title="不同进制的写法："></a>不同进制的写法：</h2><p><img src="/2021/08/30/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E8%A1%A8%E7%A4%BA%E3%80%81%E8%BF%90%E7%AE%97%E5%92%8C%E6%A0%A1%E9%AA%8C/1.png"></p>
<h2 id="进位计数："><a href="#进位计数：" class="headerlink" title="进位计数："></a>进位计数：</h2><p>基数：每位数中所允许的最大数值加1（十进制的基数是10）</p>
<p>权：基数的n次方</p>
<p>两个相邻的权值比是基数</p>
<h1 id="带符号数表示："><a href="#带符号数表示：" class="headerlink" title="带符号数表示："></a>带符号数表示：</h1><h2 id="真值："><a href="#真值：" class="headerlink" title="真值："></a>真值：</h2><p>正负号加绝对值</p>
<h2 id="机器数："><a href="#机器数：" class="headerlink" title="机器数："></a>机器数：</h2><h3 id="特征："><a href="#特征：" class="headerlink" title="特征："></a>特征：</h3><ol>
<li>只能采用二进制</li>
<li>四种编码制：原码，补码，反码，移码</li>
<li>符号位数值化：0表示正，1表示负</li>
<li>组成：符号位+有效数值</li>
</ol>
<br>

<h1 id="四种编码制"><a href="#四种编码制" class="headerlink" title="四种编码制"></a>四种编码制</h1><h2 id="原码表示法："><a href="#原码表示法：" class="headerlink" title="原码表示法："></a>原码表示法：</h2><h3 id="整数："><a href="#整数：" class="headerlink" title="整数："></a>整数：</h3><p><img src="/2021/08/30/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E8%A1%A8%E7%A4%BA%E3%80%81%E8%BF%90%E7%AE%97%E5%92%8C%E6%A0%A1%E9%AA%8C/2.png"></p>
<p>Eg：</p>
<p>+1100-&gt;0,1100(0表示正数）</p>
<p>-1100 -&gt; 2^4-(-1100) -&gt; 2^4+1100=1,1100(1表示负数）</p>
<h3 id="小数："><a href="#小数：" class="headerlink" title="小数："></a>小数：</h3><p><img src="/2021/08/30/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E8%A1%A8%E7%A4%BA%E3%80%81%E8%BF%90%E7%AE%97%E5%92%8C%E6%A0%A1%E9%AA%8C/3.png"></p>
<p>Eg：<br>+0.1100-&gt;0.1100(第一个0表示正数）</p>
<p>-0.1100 -&gt;1-(-0.1100)-&gt;1.1100(第一个1表示负数）</p>
<p>简单方法：</p>
<p>（1）取真值的绝对值的2进制表示。</p>
<p>（2）左边第一位添加符号。  </p>
<br>

<h2 id="反码表示法"><a href="#反码表示法" class="headerlink" title="反码表示法"></a>反码表示法</h2><p><strong>正数：</strong></p>
<p>反码和原码相同</p>
<p><strong>负数：</strong></p>
<p>符号位不变，原码其余各个位取反</p>
<br>

<p>Eg:</p>
<p>[+127]原=0111 1111, [+127]反=0111 1111,</p>
<p>[-127]原=1111 1111, [-127]反=1000 0000。</p>
<p>[+0]原=0000 0000, [+0]反=0000 0000,</p>
<p>[-0]原=1000 0000, [-0]反=1111 1111。</p>
<br>

<h2 id="补码表示法"><a href="#补码表示法" class="headerlink" title="补码表示法"></a>补码表示法</h2><p><strong>正数：</strong></p>
<p>补码与原码一样</p>
<p><strong>负数：</strong></p>
<p>反码末尾+1</p>
<p>Eg:</p>
<p>[+127]原=0111 1111, [+127]反=0111 1111,[+127]补=0111 1111</p>
<p>[-127]原=1111 1111, [-127]反=1000 0000，[-127]补=1000 0001</p>
<p>[+0]原=0000 0000, [+0]反=0000 0000,[+0]补=0000 0000,</p>
<p>[-0]原=1000 0000, [-0]反=1111 1111，[-0]补=0000 0000。</p>
<br>

<h2 id="移码（增码）表示法"><a href="#移码（增码）表示法" class="headerlink" title="移码（增码）表示法"></a>移码（增码）表示法</h2><p>将补码符号位取反即可</p>
<h3 id="特征：-1"><a href="#特征：-1" class="headerlink" title="特征："></a>特征：</h3><ol>
<li>符号位与原码，补码相反</li>
<li>让X从－128逐渐增至+127，相应地X移从00…00逐渐增至11……11，呈递增状。可见采用移码能更直观地比较正负阶码的大小。</li>
</ol>
<p>tips:</p>
<p>标准移码：沿x轴平移2^(n-1) </p>
<p>IEEE754非标准移码：2^(n-1)-1</p>
<p>其中n为字长</p>
<br>

<h1 id="定点数与浮点数"><a href="#定点数与浮点数" class="headerlink" title="定点数与浮点数"></a>定点数与浮点数</h1><h3 id="1-定点表示法："><a href="#1-定点表示法：" class="headerlink" title="1.定点表示法："></a>1.定点表示法：</h3><p><strong>特征：</strong>小数点位置不变</p>
<p><strong>类别：</strong></p>
<ol>
<li>无符号定点整数：略去符号位的正整数</li>
<li>带符号定点整数：小数点在最低位之后，最高位为符号位</li>
<li>带符号定点小数：纯小数，原码或补码表示</li>
</ol>
<h3 id="2-浮点数表示法："><a href="#2-浮点数表示法：" class="headerlink" title="2.浮点数表示法："></a>2.浮点数表示法：</h3><p><strong>特征：</strong>浮点数是一种小数点位置不固定，可随需要浮动的数</p>
<p><strong>格式：</strong></p>
<p><img src="/2021/08/30/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E8%A1%A8%E7%A4%BA%E3%80%81%E8%BF%90%E7%AE%97%E5%92%8C%E6%A0%A1%E9%AA%8C/4.png"></p>
<p><img src="/2021/08/30/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E8%A1%A8%E7%A4%BA%E3%80%81%E8%BF%90%E7%AE%97%E5%92%8C%E6%A0%A1%E9%AA%8C/5.png"></p>
<br>

<p><strong>R是阶码的底：</strong>一般约定为基数</p>
<p><strong>E是阶码</strong></p>
<p><strong>M是尾数：</strong>带符号定点小数，可用补码或原码表示</p>
<br>

<h2 id="IEEE754标准浮点格式"><a href="#IEEE754标准浮点格式" class="headerlink" title="IEEE754标准浮点格式"></a>IEEE754标准浮点格式</h2><h3 id="3种浮点表示格式："><a href="#3种浮点表示格式：" class="headerlink" title="3种浮点表示格式："></a>3种浮点表示格式：</h3><p><img src="/2021/08/30/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E8%A1%A8%E7%A4%BA%E3%80%81%E8%BF%90%E7%AE%97%E5%92%8C%E6%A0%A1%E9%AA%8C/6.png"></p>
<p><strong>注意：</strong></p>
<p>短浮点数又称为单精度浮点数，长浮点数又称为双精度浮点数，它们都采用<strong>隐含尾数最高数位</strong></p>
<p>（2^0）的方法。因此，<strong>相应地尾数真值实际上等于1+（23位尾数数值或52位尾数数值）</strong></p>
<h3 id="如何用浮点数形式表示："><a href="#如何用浮点数形式表示：" class="headerlink" title="如何用浮点数形式表示："></a>如何用浮点数形式表示：</h3><p><strong>阶码是以移码形式存储的，存储浮点数阶码部分之前，偏置值先要加到阶码真值上。</strong></p>
<p><img src="/2021/08/30/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E8%A1%A8%E7%A4%BA%E3%80%81%E8%BF%90%E7%AE%97%E5%92%8C%E6%A0%A1%E9%AA%8C/7.png"></p>
<p>tips:</p>
<p>阶码真值：科学计数法后小数退的位数</p>
<p>偏置值：2^(n-1)-1</p>
<p><strong>举例：</strong></p>
<p><img src="/2021/08/30/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E8%A1%A8%E7%A4%BA%E3%80%81%E8%BF%90%E7%AE%97%E5%92%8C%E6%A0%A1%E9%AA%8C/8.png"></p>
<p><img src="/2021/08/30/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E8%A1%A8%E7%A4%BA%E3%80%81%E8%BF%90%E7%AE%97%E5%92%8C%E6%A0%A1%E9%AA%8C/9.png"></p>
<h3 id="反向运算："><a href="#反向运算：" class="headerlink" title="反向运算："></a>反向运算：</h3><p><img src="/2021/08/30/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E8%A1%A8%E7%A4%BA%E3%80%81%E8%BF%90%E7%AE%97%E5%92%8C%E6%A0%A1%E9%AA%8C/10.png"></p>
<h4 id="例题："><a href="#例题：" class="headerlink" title="例题："></a>例题：</h4><p><img src="/2021/08/30/%E8%AE%A1%E7%BB%84%EF%BC%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E8%A1%A8%E7%A4%BA%E3%80%81%E8%BF%90%E7%AE%97%E5%92%8C%E6%A0%A1%E9%AA%8C/11.png"></p>
<p>参考网站：<a href="https://www.cnblogs.com/bruce81/p/3536596.html">https://www.cnblogs.com/bruce81/p/3536596.html</a></p>
]]></content>
      <tags>
        <tag>计算机组成原理</tag>
      </tags>
  </entry>
</search>
